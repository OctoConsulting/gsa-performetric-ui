import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ReactiveFormsModule } from '@angular/forms';
import { FormlyModule } from '@ngx-formly/core';
import { FormlySelectModule } from '@ngx-formly/core/select';
import { MatInputModule } from '@angular/material/input';
import { FontAwesomeModule } from '@fortawesome/angular-fontawesome';
import { MatNativeDateModule } from '@angular/material/core';
import { MatDatepickerModule } from '@angular/material/datepicker';
import { SdsAccordionModule, SdsAutocompleteModule, SdsDialogModule, SdsTextModule, SdsSearchModule } from '@gsa-sam/components';
import { FIELD_TYPE_COMPONENTS, FORMLY_CONFIG } from './formly.config';
import { maxDateValidator, minDateValidator } from './formly.validators';
import { AnimationWrapperComponent } from './wrappers/form-field.animation';
// Validate the min length of the character
export function minlengthValidationMessage(err, field) {
    return `Should have atleast ${field.templateOptions.minLength} characters`;
}
// Validate the max length of the character
export function maxlengthValidationMessage(err, field) {
    return `This value should be less than ${field.templateOptions.maxLength} characters`;
}
// Validate the min value of the character
export function minValidationMessage(err, field) {
    return `This value should be more than ${field.templateOptions.min}`;
}
export function minDateValidationMessage(err, field) {
    const dt = field.templateOptions.minDate;
    const dateFormat = (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
    return `Date must be after ${dateFormat}`;
}
export function maxDateValidationMessage(err, field) {
    const dt = field.templateOptions.maxDate;
    const dateFormat = (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
    return `Date must be before ${dateFormat}`;
}
export function betweenDateValidationMessage(err, field) {
    const dtnmax = field.templateOptions.maxDate;
    const dateMaxFormat = (dtnmax.getMonth() + 1) + "/" + dtnmax.getDate() + "/" + dtnmax.getFullYear();
    const dtmin = field.templateOptions.minDate;
    const dateMinFormat = (dtmin.getMonth() + 1) + "/" + dtmin.getDate() + "/" + dtmin.getFullYear();
    return `Date must be between ${dateMinFormat} and ${dateMaxFormat} `;
}
export function invalidDateFormatValidationMessage(err, field) {
    return `Valid date format required (ex: MM/DD/YYYY)`;
}
// Validate the max value of the character
export function maxValidationMessage(err, field) {
    return `This value should be less than ${field.templateOptions.max}`;
}
export function animationExtension(field) {
    if (field.wrappers && field.wrappers.includes('animation')) {
        return;
    }
    field.wrappers = ['animation', ...(field.wrappers || [])];
}
export { maxDateValidator, minDateValidator } from './formly.validators';
export class SdsFormlyModule {
    static forChild(config = {}) {
        return [{ ngModule: SdsFormlyModule, providers: [] }, FormlyModule.forChild(config)];
    }
}
SdsFormlyModule.decorators = [
    { type: NgModule, args: [{
                declarations: [
                    FIELD_TYPE_COMPONENTS,
                    AnimationWrapperComponent,
                ],
                imports: [
                    CommonModule,
                    SdsAccordionModule,
                    SdsAutocompleteModule,
                    SdsDialogModule,
                    SdsSearchModule,
                    SdsTextModule,
                    MatNativeDateModule,
                    MatDatepickerModule,
                    MatInputModule,
                    FontAwesomeModule,
                    ReactiveFormsModule,
                    FormlySelectModule,
                    FormlyModule.forChild(FORMLY_CONFIG),
                    FormlyModule.forRoot({
                        validationMessages: [
                            { name: 'required', message: 'This field is required' },
                            { name: 'minlength', message: minlengthValidationMessage },
                            { name: 'maxlength', message: maxlengthValidationMessage },
                            { name: 'min', message: minValidationMessage },
                            { name: 'max', message: maxValidationMessage },
                            { name: 'minDate', message: minDateValidationMessage },
                            { name: 'maxDate', message: maxDateValidationMessage },
                            { name: 'betweenDate', message: betweenDateValidationMessage },
                            { name: 'matDatepickerParse', message: invalidDateFormatValidationMessage } // Comes from the datepicker
                        ],
                        validators: [
                            { name: 'minDate', validation: minDateValidator },
                            { name: 'maxDate', validation: maxDateValidator }
                        ],
                        wrappers: [
                            { name: 'animation', component: AnimationWrapperComponent },
                        ],
                        extensions: [
                            { name: 'animation', extension: { onPopulate: animationExtension } },
                        ],
                    })
                ]
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWx5Lm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL3NhbS1mb3JtbHkvIiwic291cmNlcyI6WyJsaWIvZm9ybWx5L2Zvcm1seS5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBdUIsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxZQUFZLEVBQW1DLE1BQU0sa0JBQWtCLENBQUM7QUFDakYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ25FLE9BQU8sRUFDTCxrQkFBa0IsRUFBRSxxQkFBcUIsRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLGVBQWUsRUFDM0YsTUFBTSxxQkFBcUIsQ0FBQztBQUU3QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDdkUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDekUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFFNUUsMkNBQTJDO0FBQzNDLE1BQU0sVUFBVSwwQkFBMEIsQ0FBQyxHQUFHLEVBQUUsS0FBSztJQUNuRCxPQUFPLHVCQUF1QixLQUFLLENBQUMsZUFBZSxDQUFDLFNBQVMsYUFBYSxDQUFDO0FBQzdF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QUUsT0FBTyxFQUFFLGtDQUFrQyxFQUFFLENBQUEsNEJBQTRCO3lCQUN4Rzt3QkFDRCxVQUFVLEVBQUU7NEJBQ1YsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRTs0QkFDakQsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRTt5QkFDbEQ7d0JBQ0QsUUFBUSxFQUFFOzRCQUNSLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUseUJBQXlCLEVBQUU7eUJBQzVEO3dCQUNELFVBQVUsRUFBRTs0QkFDVixFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLEVBQUUsVUFBVSxFQUFFLGtCQUFrQixFQUFFLEVBQUU7eUJBQ3JFO3FCQUNGLENBQUM7aUJBQ0g7YUFDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEZvcm1seU1vZHVsZSwgRm9ybWx5RmllbGRDb25maWcsIENvbmZpZ09wdGlvbiB9IGZyb20gJ0BuZ3gtZm9ybWx5L2NvcmUnO1xuaW1wb3J0IHsgRm9ybWx5U2VsZWN0TW9kdWxlIH0gZnJvbSAnQG5neC1mb3JtbHkvY29yZS9zZWxlY3QnO1xuaW1wb3J0IHsgTWF0SW5wdXRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pbnB1dCc7XG5pbXBvcnQgeyBGb250QXdlc29tZU1vZHVsZSB9IGZyb20gJ0Bmb3J0YXdlc29tZS9hbmd1bGFyLWZvbnRhd2Vzb21lJztcbmltcG9ydCB7IE1hdE5hdGl2ZURhdGVNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9jb3JlJztcbmltcG9ydCB7IE1hdERhdGVwaWNrZXJNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kYXRlcGlja2VyJztcbmltcG9ydCB7XG4gIFNkc0FjY29yZGlvbk1vZHVsZSwgU2RzQXV0b2NvbXBsZXRlTW9kdWxlLCBTZHNEaWFsb2dNb2R1bGUsIFNkc1RleHRNb2R1bGUsIFNkc1NlYXJjaE1vZHVsZVxufSBmcm9tICdAZ3NhLXNhbS9jb21wb25lbnRzJztcblxuaW1wb3J0IHsgRklFTERfVFlQRV9DT01QT05FTlRTLCBGT1JNTFlfQ09ORklHIH0gZnJvbSAnLi9mb3JtbHkuY29uZmlnJztcbmltcG9ydCB7IG1heERhdGVWYWxpZGF0b3IsIG1pbkRhdGVWYWxpZGF0b3IgfSBmcm9tICcuL2Zvcm1seS52YWxpZGF0b3JzJztcbmltcG9ydCB7IEFuaW1hdGlvbldyYXBwZXJDb21wb25lbnQgfSBmcm9tICcuL3dyYXBwZXJzL2Zvcm0tZmllbGQuYW5pbWF0aW9uJztcblxuLy8gVmFsaWRhdGUgdGhlIG1pbiBsZW5ndGggb2YgdGhlIGNoYXJhY3RlclxuZXhwb3J0IGZ1bmN0aW9uIG1pbmxlbmd0aFZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQpIHtcbiAgcmV0dXJuIGBTaG91bGQgaGF2ZSBhdGxlYXN0ICR7ZmllbGQudGVtcGxhdGVPcHRpb25zLm1pbkxlbmd0aH0gY2hhcmFjdGVyc2A7XG59XG5cbi8vIFZhbGlkYXRlIHRoZSBtYXggbGVuZ3RoIG9mIHRoZSBjaGFyYWN0ZXJcbmV4cG9ydCBmdW5jdGlvbiBtYXhsZW5ndGhWYWxpZGF0aW9uTWVzc2FnZShlcnIsIGZpZWxkKSB7XG4gIHJldHVybiBgVGhpcyB2YWx1ZSBzaG91bGQgYmUgbGVzcyB0aGFuICR7ZmllbGQudGVtcGxhdGVPcHRpb25zLm1heExlbmd0aH0gY2hhcmFjdGVyc2A7XG59XG5cbi8vIFZhbGlkYXRlIHRoZSBtaW4gdmFsdWUgb2YgdGhlIGNoYXJhY3RlclxuZXhwb3J0IGZ1bmN0aW9uIG1pblZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIHJldHVybiBgVGhpcyB2YWx1ZSBzaG91bGQgYmUgbW9yZSB0aGFuICR7ZmllbGQudGVtcGxhdGVPcHRpb25zLm1pbn1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWluRGF0ZVZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIGNvbnN0IGR0ID0gZmllbGQudGVtcGxhdGVPcHRpb25zLm1pbkRhdGU7XG4gIGNvbnN0IGRhdGVGb3JtYXQgPSAoZHQuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyBkdC5nZXREYXRlKCkgKyBcIi9cIiArIGR0LmdldEZ1bGxZZWFyKCk7XG4gIHJldHVybiBgRGF0ZSBtdXN0IGJlIGFmdGVyICR7ZGF0ZUZvcm1hdH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF4RGF0ZVZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIGNvbnN0IGR0ID0gZmllbGQudGVtcGxhdGVPcHRpb25zLm1heERhdGU7XG4gIGNvbnN0IGRhdGVGb3JtYXQgPSAoZHQuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyBkdC5nZXREYXRlKCkgKyBcIi9cIiArIGR0LmdldEZ1bGxZZWFyKCk7XG4gIHJldHVybiBgRGF0ZSBtdXN0IGJlIGJlZm9yZSAke2RhdGVGb3JtYXR9YDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gYmV0d2VlbkRhdGVWYWxpZGF0aW9uTWVzc2FnZShlcnIsIGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICBjb25zdCBkdG5tYXggPSBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWF4RGF0ZTtcbiAgY29uc3QgZGF0ZU1heEZvcm1hdCA9IChkdG5tYXguZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyBkdG5tYXguZ2V0RGF0ZSgpICsgXCIvXCIgKyBkdG5tYXguZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgZHRtaW4gPSBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWluRGF0ZTtcbiAgY29uc3QgZGF0ZU1pbkZvcm1hdCA9IChkdG1pbi5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGR0bWluLmdldERhdGUoKSArIFwiL1wiICsgZHRtaW4uZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGBEYXRlIG11c3QgYmUgYmV0d2VlbiAke2RhdGVNaW5Gb3JtYXR9IGFuZCAke2RhdGVNYXhGb3JtYXR9IGA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZhbGlkRGF0ZUZvcm1hdFZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIHJldHVybiBgVmFsaWQgZGF0ZSBmb3JtYXQgcmVxdWlyZWQgKGV4OiBNTS9ERC9ZWVlZKWA7XG59XG5cbi8vIFZhbGlkYXRlIHRoZSBtYXggdmFsdWUgb2YgdGhlIGNoYXJhY3RlclxuZXhwb3J0IGZ1bmN0aW9uIG1heFZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQpIHtcbiAgcmV0dXJuIGBUaGlzIHZhbHVlIHNob3VsZCBiZSBsZXNzIHRoYW4gJHtmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWF4fWA7XG59XG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0aW9uRXh0ZW5zaW9uKGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICBpZiAoZmllbGQud3JhcHBlcnMgJiYgZmllbGQud3JhcHBlcnMuaW5jbHVkZXMoJ2FuaW1hdGlvbicpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmllbGQud3JhcHBlcnMgPSBbJ2FuaW1hdGlvbicsIC4uLihmaWVsZC53cmFwcGVycyB8fCBbXSldO1xufVxuZXhwb3J0IHsgbWF4RGF0ZVZhbGlkYXRvciwgbWluRGF0ZVZhbGlkYXRvciB9IGZyb20gJy4vZm9ybWx5LnZhbGlkYXRvcnMnO1xuXG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEZJRUxEX1RZUEVfQ09NUE9ORU5UUyxcbiAgICBBbmltYXRpb25XcmFwcGVyQ29tcG9uZW50LFxuICBdLFxuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIFNkc0FjY29yZGlvbk1vZHVsZSxcbiAgICBTZHNBdXRvY29tcGxldGVNb2R1bGUsXG4gICAgU2RzRGlhbG9nTW9kdWxlLFxuICAgIFNkc1NlYXJjaE1vZHVsZSxcbiAgICBTZHNUZXh0TW9kdWxlLFxuICAgIE1hdE5hdGl2ZURhdGVNb2R1bGUsXG4gICAgTWF0RGF0ZXBpY2tlck1vZHVsZSxcbiAgICBNYXRJbnB1dE1vZHVsZSxcbiAgICBGb250QXdlc29tZU1vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICAgIEZvcm1seVNlbGVjdE1vZHVsZSxcbiAgICBGb3JtbHlNb2R1bGUuZm9yQ2hpbGQoRk9STUxZX0NPTkZJRyksXG4gICAgRm9ybWx5TW9kdWxlLmZvclJvb3Qoe1xuICAgICAgdmFsaWRhdGlvbk1lc3NhZ2VzOiBbXG4gICAgICAgIHsgbmFtZTogJ3JlcXVpcmVkJywgbWVzc2FnZTogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgbmFtZTogJ21pbmxlbmd0aCcsIG1lc3NhZ2U6IG1pbmxlbmd0aFZhbGlkYXRpb25NZXNzYWdlIH0sXG4gICAgICAgIHsgbmFtZTogJ21heGxlbmd0aCcsIG1lc3NhZ2U6IG1heGxlbmd0aFZhbGlkYXRpb25NZXNzYWdlIH0sXG4gICAgICAgIHsgbmFtZTogJ21pbicsIG1lc3NhZ2U6IG1pblZhbGlkYXRpb25NZXNzYWdlIH0sXG4gICAgICAgIHsgbmFtZTogJ21heCcsIG1lc3NhZ2U6IG1heFZhbGlkYXRpb25NZXNzYWdlIH0sXG4gICAgICAgIHsgbmFtZTogJ21pbkRhdGUnLCBtZXNzYWdlOiBtaW5EYXRlVmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWF4RGF0ZScsIG1lc3NhZ2U6IG1heERhdGVWYWxpZGF0aW9uTWVzc2FnZSB9LFxuICAgICAgICB7IG5hbWU6ICdiZXR3ZWVuRGF0ZScsIG1lc3NhZ2U6IGJldHdlZW5EYXRlVmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWF0RGF0ZXBpY2tlclBhcnNlJywgbWVzc2FnZTogaW52YWxpZERhdGVGb3JtYXRWYWxpZGF0aW9uTWVzc2FnZSB9Ly8gQ29tZXMgZnJvbSB0aGUgZGF0ZXBpY2tlclxuICAgICAgXSxcbiAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgeyBuYW1lOiAnbWluRGF0ZScsIHZhbGlkYXRpb246IG1pbkRhdGVWYWxpZGF0b3IgfSxcbiAgICAgICAgeyBuYW1lOiAnbWF4RGF0ZScsIHZhbGlkYXRpb246IG1heERhdGVWYWxpZGF0b3IgfVxuICAgICAgXSxcbiAgICAgIHdyYXBwZXJzOiBbXG4gICAgICAgIHsgbmFtZTogJ2FuaW1hdGlvbicsIGNvbXBvbmVudDogQW5pbWF0aW9uV3JhcHBlckNvbXBvbmVudCB9LFxuICAgICAgXSxcbiAgICAgIGV4dGVuc2lvbnM6IFtcbiAgICAgICAgeyBuYW1lOiAnYW5pbWF0aW9uJywgZXh0ZW5zaW9uOiB7IG9uUG9wdWxhdGU6IGFuaW1hdGlvbkV4dGVuc2lvbiB9IH0sXG4gICAgICBdLFxuICAgIH0pXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgU2RzRm9ybWx5TW9kdWxlIHtcbiAgcHVibGljIHN0YXRpYyBmb3JDaGlsZChjb25maWc6IENvbmZpZ09wdGlvbiA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVyc1tdIHtcbiAgICByZXR1cm4gW3sgbmdNb2R1bGU6IFNkc0Zvcm1seU1vZHVsZSwgcHJvdmlkZXJzOiBbXSB9LCBGb3JtbHlNb2R1bGUuZm9yQ2hpbGQoY29uZmlnKV07XG4gIH1cbn1cbiJdfQ==