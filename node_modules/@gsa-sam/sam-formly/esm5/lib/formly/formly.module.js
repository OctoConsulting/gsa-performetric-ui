import * as tslib_1 from "tslib";
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ReactiveFormsModule } from '@angular/forms';
import { FormlyModule } from '@ngx-formly/core';
import { FormlySelectModule } from '@ngx-formly/core/select';
import { MatInputModule } from '@angular/material/input';
import { FontAwesomeModule } from '@fortawesome/angular-fontawesome';
import { MatNativeDateModule } from '@angular/material/core';
import { MatDatepickerModule } from '@angular/material/datepicker';
import { SdsAccordionModule, SdsAutocompleteModule, SdsDialogModule, SdsTextModule, SdsSearchModule } from '@gsa-sam/components';
import { FIELD_TYPE_COMPONENTS, FORMLY_CONFIG } from './formly.config';
import { maxDateValidator, minDateValidator } from './formly.validators';
import { AnimationWrapperComponent } from './wrappers/form-field.animation';
// Validate the min length of the character
export function minlengthValidationMessage(err, field) {
    return "Should have atleast " + field.templateOptions.minLength + " characters";
}
// Validate the max length of the character
export function maxlengthValidationMessage(err, field) {
    return "This value should be less than " + field.templateOptions.maxLength + " characters";
}
// Validate the min value of the character
export function minValidationMessage(err, field) {
    return "This value should be more than " + field.templateOptions.min;
}
export function minDateValidationMessage(err, field) {
    var dt = field.templateOptions.minDate;
    var dateFormat = (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
    return "Date must be after " + dateFormat;
}
export function maxDateValidationMessage(err, field) {
    var dt = field.templateOptions.maxDate;
    var dateFormat = (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
    return "Date must be before " + dateFormat;
}
export function betweenDateValidationMessage(err, field) {
    var dtnmax = field.templateOptions.maxDate;
    var dateMaxFormat = (dtnmax.getMonth() + 1) + "/" + dtnmax.getDate() + "/" + dtnmax.getFullYear();
    var dtmin = field.templateOptions.minDate;
    var dateMinFormat = (dtmin.getMonth() + 1) + "/" + dtmin.getDate() + "/" + dtmin.getFullYear();
    return "Date must be between " + dateMinFormat + " and " + dateMaxFormat + " ";
}
export function invalidDateFormatValidationMessage(err, field) {
    return "Valid date format required (ex: MM/DD/YYYY)";
}
// Validate the max value of the character
export function maxValidationMessage(err, field) {
    return "This value should be less than " + field.templateOptions.max;
}
export function animationExtension(field) {
    if (field.wrappers && field.wrappers.includes('animation')) {
        return;
    }
    field.wrappers = tslib_1.__spread(['animation'], (field.wrappers || []));
}
export { maxDateValidator, minDateValidator } from './formly.validators';
var SdsFormlyModule = /** @class */ (function () {
    function SdsFormlyModule() {
    }
    SdsFormlyModule.forChild = function (config) {
        if (config === void 0) { config = {}; }
        return [{ ngModule: SdsFormlyModule, providers: [] }, FormlyModule.forChild(config)];
    };
    SdsFormlyModule.decorators = [
        { type: NgModule, args: [{
                    declarations: [
                        FIELD_TYPE_COMPONENTS,
                        AnimationWrapperComponent,
                    ],
                    imports: [
                        CommonModule,
                        SdsAccordionModule,
                        SdsAutocompleteModule,
                        SdsDialogModule,
                        SdsSearchModule,
                        SdsTextModule,
                        MatNativeDateModule,
                        MatDatepickerModule,
                        MatInputModule,
                        FontAwesomeModule,
                        ReactiveFormsModule,
                        FormlySelectModule,
                        FormlyModule.forChild(FORMLY_CONFIG),
                        FormlyModule.forRoot({
                            validationMessages: [
                                { name: 'required', message: 'This field is required' },
                                { name: 'minlength', message: minlengthValidationMessage },
                                { name: 'maxlength', message: maxlengthValidationMessage },
                                { name: 'min', message: minValidationMessage },
                                { name: 'max', message: maxValidationMessage },
                                { name: 'minDate', message: minDateValidationMessage },
                                { name: 'maxDate', message: maxDateValidationMessage },
                                { name: 'betweenDate', message: betweenDateValidationMessage },
                                { name: 'matDatepickerParse', message: invalidDateFormatValidationMessage } // Comes from the datepicker
                            ],
                            validators: [
                                { name: 'minDate', validation: minDateValidator },
                                { name: 'maxDate', validation: maxDateValidator }
                            ],
                            wrappers: [
                                { name: 'animation', component: AnimationWrapperComponent },
                            ],
                            extensions: [
                                { name: 'animation', extension: { onPopulate: animationExtension } },
                            ],
                        })
                    ]
                },] }
    ];
    return SdsFormlyModule;
}());
export { SdsFormlyModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWx5Lm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL3NhbS1mb3JtbHkvIiwic291cmNlcyI6WyJsaWIvZm9ybWx5L2Zvcm1seS5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQXVCLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsWUFBWSxFQUFtQyxNQUFNLGtCQUFrQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzdELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNyRSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUNuRSxPQUFPLEVBQ0wsa0JBQWtCLEVBQUUscUJBQXFCLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxlQUFlLEVBQzNGLE1BQU0scUJBQXFCLENBQUM7QUFFN0IsT0FBTyxFQUFFLHFCQUFxQixFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRTVFLDJDQUEyQztBQUMzQyxNQUFNLFVBQVUsMEJBQTBCLENBQUMsR0FBRyxFQUFFLEtBQUs7SUFDbkQsT0FBTyx5QkFBdUIsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUFTLGdCQUFhLENBQUM7QUFD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RSxrQ0FBa0MsRUFBRSxDQUFBLDRCQUE0Qjs2QkFDeEc7NEJBQ0QsVUFBVSxFQUFFO2dDQUNWLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUU7Z0NBQ2pELEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUU7NkJBQ2xEOzRCQUNELFFBQVEsRUFBRTtnQ0FDUixFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLHlCQUF5QixFQUFFOzZCQUM1RDs0QkFDRCxVQUFVLEVBQUU7Z0NBQ1YsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxFQUFFLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxFQUFFOzZCQUNyRTt5QkFDRixDQUFDO3FCQUNIO2lCQUNGOztJQUtELHNCQUFDO0NBQUEsQUFoREQsSUFnREM7U0FKWSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRm9ybWx5TW9kdWxlLCBGb3JtbHlGaWVsZENvbmZpZywgQ29uZmlnT3B0aW9uIH0gZnJvbSAnQG5neC1mb3JtbHkvY29yZSc7XG5pbXBvcnQgeyBGb3JtbHlTZWxlY3RNb2R1bGUgfSBmcm9tICdAbmd4LWZvcm1seS9jb3JlL3NlbGVjdCc7XG5pbXBvcnQgeyBNYXRJbnB1dE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2lucHV0JztcbmltcG9ydCB7IEZvbnRBd2Vzb21lTW9kdWxlIH0gZnJvbSAnQGZvcnRhd2Vzb21lL2FuZ3VsYXItZm9udGF3ZXNvbWUnO1xuaW1wb3J0IHsgTWF0TmF0aXZlRGF0ZU1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2NvcmUnO1xuaW1wb3J0IHsgTWF0RGF0ZXBpY2tlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RhdGVwaWNrZXInO1xuaW1wb3J0IHtcbiAgU2RzQWNjb3JkaW9uTW9kdWxlLCBTZHNBdXRvY29tcGxldGVNb2R1bGUsIFNkc0RpYWxvZ01vZHVsZSwgU2RzVGV4dE1vZHVsZSwgU2RzU2VhcmNoTW9kdWxlXG59IGZyb20gJ0Bnc2Etc2FtL2NvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBGSUVMRF9UWVBFX0NPTVBPTkVOVFMsIEZPUk1MWV9DT05GSUcgfSBmcm9tICcuL2Zvcm1seS5jb25maWcnO1xuaW1wb3J0IHsgbWF4RGF0ZVZhbGlkYXRvciwgbWluRGF0ZVZhbGlkYXRvciB9IGZyb20gJy4vZm9ybWx5LnZhbGlkYXRvcnMnO1xuaW1wb3J0IHsgQW5pbWF0aW9uV3JhcHBlckNvbXBvbmVudCB9IGZyb20gJy4vd3JhcHBlcnMvZm9ybS1maWVsZC5hbmltYXRpb24nO1xuXG4vLyBWYWxpZGF0ZSB0aGUgbWluIGxlbmd0aCBvZiB0aGUgY2hhcmFjdGVyXG5leHBvcnQgZnVuY3Rpb24gbWlubGVuZ3RoVmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZCkge1xuICByZXR1cm4gYFNob3VsZCBoYXZlIGF0bGVhc3QgJHtmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWluTGVuZ3RofSBjaGFyYWN0ZXJzYDtcbn1cblxuLy8gVmFsaWRhdGUgdGhlIG1heCBsZW5ndGggb2YgdGhlIGNoYXJhY3RlclxuZXhwb3J0IGZ1bmN0aW9uIG1heGxlbmd0aFZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQpIHtcbiAgcmV0dXJuIGBUaGlzIHZhbHVlIHNob3VsZCBiZSBsZXNzIHRoYW4gJHtmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWF4TGVuZ3RofSBjaGFyYWN0ZXJzYDtcbn1cblxuLy8gVmFsaWRhdGUgdGhlIG1pbiB2YWx1ZSBvZiB0aGUgY2hhcmFjdGVyXG5leHBvcnQgZnVuY3Rpb24gbWluVmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgcmV0dXJuIGBUaGlzIHZhbHVlIHNob3VsZCBiZSBtb3JlIHRoYW4gJHtmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWlufWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaW5EYXRlVmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgY29uc3QgZHQgPSBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWluRGF0ZTtcbiAgY29uc3QgZGF0ZUZvcm1hdCA9IChkdC5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGR0LmdldERhdGUoKSArIFwiL1wiICsgZHQuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGBEYXRlIG11c3QgYmUgYWZ0ZXIgJHtkYXRlRm9ybWF0fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXhEYXRlVmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgY29uc3QgZHQgPSBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMubWF4RGF0ZTtcbiAgY29uc3QgZGF0ZUZvcm1hdCA9IChkdC5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGR0LmdldERhdGUoKSArIFwiL1wiICsgZHQuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGBEYXRlIG11c3QgYmUgYmVmb3JlICR7ZGF0ZUZvcm1hdH1gO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBiZXR3ZWVuRGF0ZVZhbGlkYXRpb25NZXNzYWdlKGVyciwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIGNvbnN0IGR0bm1heCA9IGZpZWxkLnRlbXBsYXRlT3B0aW9ucy5tYXhEYXRlO1xuICBjb25zdCBkYXRlTWF4Rm9ybWF0ID0gKGR0bm1heC5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGR0bm1heC5nZXREYXRlKCkgKyBcIi9cIiArIGR0bm1heC5nZXRGdWxsWWVhcigpO1xuICBjb25zdCBkdG1pbiA9IGZpZWxkLnRlbXBsYXRlT3B0aW9ucy5taW5EYXRlO1xuICBjb25zdCBkYXRlTWluRm9ybWF0ID0gKGR0bWluLmdldE1vbnRoKCkgKyAxKSArIFwiL1wiICsgZHRtaW4uZ2V0RGF0ZSgpICsgXCIvXCIgKyBkdG1pbi5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gYERhdGUgbXVzdCBiZSBiZXR3ZWVuICR7ZGF0ZU1pbkZvcm1hdH0gYW5kICR7ZGF0ZU1heEZvcm1hdH0gYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWREYXRlRm9ybWF0VmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgcmV0dXJuIGBWYWxpZCBkYXRlIGZvcm1hdCByZXF1aXJlZCAoZXg6IE1NL0REL1lZWVkpYDtcbn1cblxuLy8gVmFsaWRhdGUgdGhlIG1heCB2YWx1ZSBvZiB0aGUgY2hhcmFjdGVyXG5leHBvcnQgZnVuY3Rpb24gbWF4VmFsaWRhdGlvbk1lc3NhZ2UoZXJyLCBmaWVsZCkge1xuICByZXR1cm4gYFRoaXMgdmFsdWUgc2hvdWxkIGJlIGxlc3MgdGhhbiAke2ZpZWxkLnRlbXBsYXRlT3B0aW9ucy5tYXh9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRpb25FeHRlbnNpb24oZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gIGlmIChmaWVsZC53cmFwcGVycyAmJiBmaWVsZC53cmFwcGVycy5pbmNsdWRlcygnYW5pbWF0aW9uJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmaWVsZC53cmFwcGVycyA9IFsnYW5pbWF0aW9uJywgLi4uKGZpZWxkLndyYXBwZXJzIHx8IFtdKV07XG59XG5leHBvcnQgeyBtYXhEYXRlVmFsaWRhdG9yLCBtaW5EYXRlVmFsaWRhdG9yIH0gZnJvbSAnLi9mb3JtbHkudmFsaWRhdG9ycyc7XG5cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgRklFTERfVFlQRV9DT01QT05FTlRTLFxuICAgIEFuaW1hdGlvbldyYXBwZXJDb21wb25lbnQsXG4gIF0sXG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgU2RzQWNjb3JkaW9uTW9kdWxlLFxuICAgIFNkc0F1dG9jb21wbGV0ZU1vZHVsZSxcbiAgICBTZHNEaWFsb2dNb2R1bGUsXG4gICAgU2RzU2VhcmNoTW9kdWxlLFxuICAgIFNkc1RleHRNb2R1bGUsXG4gICAgTWF0TmF0aXZlRGF0ZU1vZHVsZSxcbiAgICBNYXREYXRlcGlja2VyTW9kdWxlLFxuICAgIE1hdElucHV0TW9kdWxlLFxuICAgIEZvbnRBd2Vzb21lTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgRm9ybWx5U2VsZWN0TW9kdWxlLFxuICAgIEZvcm1seU1vZHVsZS5mb3JDaGlsZChGT1JNTFlfQ09ORklHKSxcbiAgICBGb3JtbHlNb2R1bGUuZm9yUm9vdCh7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZXM6IFtcbiAgICAgICAgeyBuYW1lOiAncmVxdWlyZWQnLCBtZXNzYWdlOiAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBuYW1lOiAnbWlubGVuZ3RoJywgbWVzc2FnZTogbWlubGVuZ3RoVmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWF4bGVuZ3RoJywgbWVzc2FnZTogbWF4bGVuZ3RoVmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWluJywgbWVzc2FnZTogbWluVmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWF4JywgbWVzc2FnZTogbWF4VmFsaWRhdGlvbk1lc3NhZ2UgfSxcbiAgICAgICAgeyBuYW1lOiAnbWluRGF0ZScsIG1lc3NhZ2U6IG1pbkRhdGVWYWxpZGF0aW9uTWVzc2FnZSB9LFxuICAgICAgICB7IG5hbWU6ICdtYXhEYXRlJywgbWVzc2FnZTogbWF4RGF0ZVZhbGlkYXRpb25NZXNzYWdlIH0sXG4gICAgICAgIHsgbmFtZTogJ2JldHdlZW5EYXRlJywgbWVzc2FnZTogYmV0d2VlbkRhdGVWYWxpZGF0aW9uTWVzc2FnZSB9LFxuICAgICAgICB7IG5hbWU6ICdtYXREYXRlcGlja2VyUGFyc2UnLCBtZXNzYWdlOiBpbnZhbGlkRGF0ZUZvcm1hdFZhbGlkYXRpb25NZXNzYWdlIH0vLyBDb21lcyBmcm9tIHRoZSBkYXRlcGlja2VyXG4gICAgICBdLFxuICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICB7IG5hbWU6ICdtaW5EYXRlJywgdmFsaWRhdGlvbjogbWluRGF0ZVZhbGlkYXRvciB9LFxuICAgICAgICB7IG5hbWU6ICdtYXhEYXRlJywgdmFsaWRhdGlvbjogbWF4RGF0ZVZhbGlkYXRvciB9XG4gICAgICBdLFxuICAgICAgd3JhcHBlcnM6IFtcbiAgICAgICAgeyBuYW1lOiAnYW5pbWF0aW9uJywgY29tcG9uZW50OiBBbmltYXRpb25XcmFwcGVyQ29tcG9uZW50IH0sXG4gICAgICBdLFxuICAgICAgZXh0ZW5zaW9uczogW1xuICAgICAgICB7IG5hbWU6ICdhbmltYXRpb24nLCBleHRlbnNpb246IHsgb25Qb3B1bGF0ZTogYW5pbWF0aW9uRXh0ZW5zaW9uIH0gfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBTZHNGb3JtbHlNb2R1bGUge1xuICBwdWJsaWMgc3RhdGljIGZvckNoaWxkKGNvbmZpZzogQ29uZmlnT3B0aW9uID0ge30pOiBNb2R1bGVXaXRoUHJvdmlkZXJzW10ge1xuICAgIHJldHVybiBbeyBuZ01vZHVsZTogU2RzRm9ybWx5TW9kdWxlLCBwcm92aWRlcnM6IFtdIH0sIEZvcm1seU1vZHVsZS5mb3JDaGlsZChjb25maWcpXTtcbiAgfVxufVxuIl19