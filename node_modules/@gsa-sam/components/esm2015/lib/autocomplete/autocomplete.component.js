/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, TemplateRef, forwardRef, HostListener, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { SDSSelectedItemModel } from '../selected-result/models/sds-selectedItem.model';
import { SDSAutocompletelConfiguration } from './models/SDSAutocompletelConfiguration.model';
import { SelectionMode } from '../selected-result/models/sds-selected-item-model-helper';
/** @type {?} */
const Autocomplete_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => SDSAutocompleteComponent)),
    multi: true
};
export class SDSAutocompleteComponent {
    /**
     * @param {?} cd
     */
    constructor(cd) {
        this.cd = cd;
        /**
         * Stored Event for ControlValueAccessor
         */
        this.onTouched = (/**
         * @return {?}
         */
        () => { });
        /**
         * Stored Event for ControlValueAccessor
         */
        this.onChange = (/**
         * @param {?} _
         * @return {?}
         */
        (_) => { });
    }
    // ControlValueAccessor (and Formly) is trying to update the value of the FormControl (our custom component) programatically
    // If there is a value we will just overwrite items
    // If there is no value we reset the items array to be empty
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        if (value instanceof SDSSelectedItemModel && value.items && value.items.length && this.model.items !== value.items) {
            this.model.items = [...value.items];
            this.cd.markForCheck();
        }
        else if (value && value.length && this.model.items !== value) {
            this.model.items = value;
            this.cd.markForCheck();
        }
        else {
            if (!this.model || !(this.model instanceof SDSSelectedItemModel)) {
                this.model = new SDSSelectedItemModel();
            }
            this.model.items = value && value.items ? value.items : [];
            this.cd.markForCheck();
        }
    }
    // Method that is fired when the child component event notifies us that the items array has been modified within the child component
    /**
     * @param {?} $event
     * @return {?}
     */
    updateItems($event) {
        this.updateModel();
    }
    // Helper method that gets a new instance of the model and notifies ControlValueAccessor that we have a new model for this FormControl (our custom component)
    /**
     * @return {?}
     */
    updateModel() {
        /** @type {?} */
        const model = this.getModel();
        this.onChange(model);
    }
    // Helper method to return a new instance of an array that contains our items
    /**
     * @return {?}
     */
    getModel() {
        return [...this.model.items];
    }
    // ControlValueAccessor hook that lets us call this._onChange(var) to let the form know our variable has changed (in this case model)
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChange = fn;
    }
    // ControlValueAccessor hook (not used)
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @return {?}
     */
    isSingleMode() {
        if (this.configuration) {
            return this.configuration.selectionMode === SelectionMode.SINGLE;
        }
        else {
            return false;
        }
    }
}
SDSAutocompleteComponent.decorators = [
    { type: Component, args: [{
                selector: 'sds-autocomplete',
                template: "<sds-search-autocomplete [disabled]=\"disabled\" (ngModelChange)=\"updateItems($event)\" #autocomplete\n    [service]=\"service\" [(ngModel)]=\"model\" [configuration]=\"configuration\" [itemTemplate]=\"suggestionTemplate\">\n</sds-search-autocomplete>\n<sds-selected-result (ngModelChange)=\"updateItems($event)\" [disabled]=\"disabled\" *ngIf=\"!isSingleMode()\"\n    [(ngModel)]=\"model\" [configuration]=\"configuration\" [itemTemplate]=\"selectedItemTemplate\"></sds-selected-result>\n",
                providers: [Autocomplete_VALUE_ACCESSOR],
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [""]
            }] }
];
/** @nocollapse */
SDSAutocompleteComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
SDSAutocompleteComponent.propDecorators = {
    suggestionTemplate: [{ type: Input }],
    selectedItemTemplate: [{ type: Input }],
    configuration: [{ type: Input }],
    service: [{ type: Input }],
    onTouched: [{ type: HostListener, args: ['focusout',] }]
};
if (false) {
    /**
     * Allow to insert a customized template for suggestions results
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.suggestionTemplate;
    /**
     * Allow to insert a customized template for selected items
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.selectedItemTemplate;
    /**
     * The data model that has the selected item
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.model;
    /** @type {?} */
    SDSAutocompleteComponent.prototype.disabled;
    /**
     * Configuration for the control
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.configuration;
    /**
     * Instance of the SamHiercarchicalServiceInterface provided
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.service;
    /**
     * Stored Event for ControlValueAccessor
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.onTouched;
    /**
     * Stored Event for ControlValueAccessor
     * @type {?}
     */
    SDSAutocompleteComponent.prototype.onChange;
    /**
     * @type {?}
     * @private
     */
    SDSAutocompleteComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b2NvbXBsZXRlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL2NvbXBvbmVudHMvIiwic291cmNlcyI6WyJsaWIvYXV0b2NvbXBsZXRlL2F1dG9jb21wbGV0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUVMLFdBQVcsRUFFWCxVQUFVLEVBQ1YsWUFBWSxFQUNaLGlCQUFpQixFQUNqQix1QkFBdUIsRUFDeEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNMLGlCQUFpQixFQUdsQixNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGtEQUFrRCxDQUFDO0FBRXhGLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBQzdGLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwREFBMEQsQ0FBQzs7TUFFbkYsMkJBQTJCLEdBQVE7SUFDdkMsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixXQUFXLEVBQUUsVUFBVTs7O0lBQUMsR0FBRyxFQUFFLENBQUMsd0JBQXdCLEVBQUM7SUFDdkQsS0FBSyxFQUFFLElBQUk7Q0FDWjtBQVNELE1BQU0sT0FBTyx3QkFBd0I7Ozs7SUE4Qm5DLFlBQW9CLEVBQXFCO1FBQXJCLE9BQUUsR0FBRixFQUFFLENBQW1COzs7O1FBTWxDLGNBQVM7OztRQUFHLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBQzs7OztRQUt0QixhQUFROzs7O1FBQUcsQ0FBQyxDQUFNLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBQztJQVhXLENBQUM7Ozs7Ozs7O0lBZ0I5QyxVQUFVLENBQUMsS0FBVTtRQUNuQixJQUFJLEtBQUssWUFBWSxvQkFBb0IsSUFBSSxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxLQUFLLEVBQUU7WUFDbEgsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3hCO2FBQ0ksSUFBRyxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUU7WUFDM0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDeEI7YUFBTTtZQUNMLElBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxZQUFZLG9CQUFvQixDQUFDLEVBQUU7Z0JBQy9ELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO2FBQ3pDO1lBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUMzRCxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQzs7Ozs7O0lBR0QsV0FBVyxDQUFDLE1BQU07UUFDaEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7Ozs7O0lBR0QsV0FBVzs7Y0FDSCxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7Ozs7O0lBR0QsUUFBUTtRQUNOLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsQ0FBQzs7Ozs7O0lBR0QsZ0JBQWdCLENBQUMsRUFBTztRQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNyQixDQUFDOzs7Ozs7SUFHRCxpQkFBaUIsQ0FBQyxFQUFPO1FBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7Ozs7O0lBRUQsZ0JBQWdCLENBQUMsVUFBbUI7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7SUFDN0IsQ0FBQzs7OztJQUVELFlBQVk7UUFDVixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdEIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsS0FBSyxhQUFhLENBQUMsTUFBTSxDQUFDO1NBQ2xFO2FBQU07WUFDTCxPQUFPLEtBQUssQ0FBQztTQUNkO0lBQ0gsQ0FBQzs7O1lBMUdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsa0JBQWtCO2dCQUM1QixzZkFBNEM7Z0JBRTVDLFNBQVMsRUFBRSxDQUFDLDJCQUEyQixDQUFDO2dCQUN4QyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs7YUFDaEQ7Ozs7WUF6QkMsaUJBQWlCOzs7aUNBOEJoQixLQUFLO21DQUtMLEtBQUs7NEJBWUwsS0FBSztzQkFNTCxLQUFLO3dCQVFMLFlBQVksU0FBQyxVQUFVOzs7Ozs7O0lBL0J4QixzREFBOEM7Ozs7O0lBSzlDLHdEQUFnRDs7Ozs7SUFLaEQseUNBQW1DOztJQUVuQyw0Q0FBeUI7Ozs7O0lBS3pCLGlEQUNvRDs7Ozs7SUFLcEQsMkNBQ2dEOzs7OztJQU9oRCw2Q0FDNkI7Ozs7O0lBSzdCLDRDQUFrQzs7Ozs7SUFYdEIsc0NBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgVmlld0NoaWxkLFxuICBUZW1wbGF0ZVJlZixcbiAgRWxlbWVudFJlZixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdExpc3RlbmVyLFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3lcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBOR19WQUxVRV9BQ0NFU1NPUixcbiAgQ29udHJvbFZhbHVlQWNjZXNzb3IsXG4gIEZvcm1Db250cm9sXG59IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFNEU1NlbGVjdGVkSXRlbU1vZGVsIH0gZnJvbSAnLi4vc2VsZWN0ZWQtcmVzdWx0L21vZGVscy9zZHMtc2VsZWN0ZWRJdGVtLm1vZGVsJztcbmltcG9ydCB7IFNEU0F1dG9jb21wbGV0ZVNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tICcuLi9hdXRvY29tcGxldGUtc2VhcmNoL21vZGVscy9TRFNBdXRvY29tcGxldGVTZXJ2aWNlSW50ZXJmYWNlJztcbmltcG9ydCB7IFNEU0F1dG9jb21wbGV0ZWxDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9tb2RlbHMvU0RTQXV0b2NvbXBsZXRlbENvbmZpZ3VyYXRpb24ubW9kZWwnO1xuaW1wb3J0IHsgU2VsZWN0aW9uTW9kZSB9IGZyb20gJy4uL3NlbGVjdGVkLXJlc3VsdC9tb2RlbHMvc2RzLXNlbGVjdGVkLWl0ZW0tbW9kZWwtaGVscGVyJztcblxuY29uc3QgQXV0b2NvbXBsZXRlX1ZBTFVFX0FDQ0VTU09SOiBhbnkgPSB7XG4gIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTRFNBdXRvY29tcGxldGVDb21wb25lbnQpLFxuICBtdWx0aTogdHJ1ZVxufTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnc2RzLWF1dG9jb21wbGV0ZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hdXRvY29tcGxldGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9hdXRvY29tcGxldGUuY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbQXV0b2NvbXBsZXRlX1ZBTFVFX0FDQ0VTU09SXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgU0RTQXV0b2NvbXBsZXRlQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuICAvKipcbiAgICogQWxsb3cgdG8gaW5zZXJ0IGEgY3VzdG9taXplZCB0ZW1wbGF0ZSBmb3Igc3VnZ2VzdGlvbnMgcmVzdWx0c1xuICAgKi9cbiAgQElucHV0KCkgc3VnZ2VzdGlvblRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gIC8qKlxuICAgKiBBbGxvdyB0byBpbnNlcnQgYSBjdXN0b21pemVkIHRlbXBsYXRlIGZvciBzZWxlY3RlZCBpdGVtc1xuICAgKi9cbiAgQElucHV0KCkgc2VsZWN0ZWRJdGVtVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgLyoqXG4gICAqIFRoZSBkYXRhIG1vZGVsIHRoYXQgaGFzIHRoZSBzZWxlY3RlZCBpdGVtXG4gICAqL1xuICBwdWJsaWMgbW9kZWw6IFNEU1NlbGVjdGVkSXRlbU1vZGVsO1xuXG4gIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbnRyb2xcbiAgICovXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBjb25maWd1cmF0aW9uOiBTRFNBdXRvY29tcGxldGVsQ29uZmlndXJhdGlvbjtcblxuICAvKipcbiAgICogSW5zdGFuY2Ugb2YgdGhlIFNhbUhpZXJjYXJjaGljYWxTZXJ2aWNlSW50ZXJmYWNlIHByb3ZpZGVkXG4gICAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2VydmljZTogU0RTQXV0b2NvbXBsZXRlU2VydmljZUludGVyZmFjZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikgeyB9XG5cbiAgLyoqXG4gICAqIFN0b3JlZCBFdmVudCBmb3IgQ29udHJvbFZhbHVlQWNjZXNzb3JcbiAgICovXG4gIEBIb3N0TGlzdGVuZXIoJ2ZvY3Vzb3V0JylcbiAgcHVibGljIG9uVG91Y2hlZCA9ICgpID0+IHsgfTtcblxuICAvKipcbiAgICogU3RvcmVkIEV2ZW50IGZvciBDb250cm9sVmFsdWVBY2Nlc3NvclxuICAgKi9cbiAgcHVibGljIG9uQ2hhbmdlID0gKF86IGFueSkgPT4geyB9O1xuXG4gIC8vIENvbnRyb2xWYWx1ZUFjY2Vzc29yIChhbmQgRm9ybWx5KSBpcyB0cnlpbmcgdG8gdXBkYXRlIHRoZSB2YWx1ZSBvZiB0aGUgRm9ybUNvbnRyb2wgKG91ciBjdXN0b20gY29tcG9uZW50KSBwcm9ncmFtYXRpY2FsbHlcbiAgLy8gSWYgdGhlcmUgaXMgYSB2YWx1ZSB3ZSB3aWxsIGp1c3Qgb3ZlcndyaXRlIGl0ZW1zXG4gIC8vIElmIHRoZXJlIGlzIG5vIHZhbHVlIHdlIHJlc2V0IHRoZSBpdGVtcyBhcnJheSB0byBiZSBlbXB0eVxuICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTRFNTZWxlY3RlZEl0ZW1Nb2RlbCAmJiB2YWx1ZS5pdGVtcyAmJiB2YWx1ZS5pdGVtcy5sZW5ndGggJiYgdGhpcy5tb2RlbC5pdGVtcyAhPT0gdmFsdWUuaXRlbXMpIHtcbiAgICAgIHRoaXMubW9kZWwuaXRlbXMgPSBbLi4udmFsdWUuaXRlbXNdO1xuICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgZWxzZSBpZih2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggJiYgdGhpcy5tb2RlbC5pdGVtcyAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMubW9kZWwuaXRlbXMgPSB2YWx1ZTtcbiAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKCF0aGlzLm1vZGVsIHx8ICEodGhpcy5tb2RlbCBpbnN0YW5jZW9mIFNEU1NlbGVjdGVkSXRlbU1vZGVsKSkge1xuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFNEU1NlbGVjdGVkSXRlbU1vZGVsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1vZGVsLml0ZW1zID0gdmFsdWUgJiYgdmFsdWUuaXRlbXMgPyB2YWx1ZS5pdGVtcyA6IFtdO1xuICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICAvLyBNZXRob2QgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBjaGlsZCBjb21wb25lbnQgZXZlbnQgbm90aWZpZXMgdXMgdGhhdCB0aGUgaXRlbXMgYXJyYXkgaGFzIGJlZW4gbW9kaWZpZWQgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnRcbiAgdXBkYXRlSXRlbXMoJGV2ZW50KSB7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCB0aGF0IGdldHMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIG1vZGVsIGFuZCBub3RpZmllcyBDb250cm9sVmFsdWVBY2Nlc3NvciB0aGF0IHdlIGhhdmUgYSBuZXcgbW9kZWwgZm9yIHRoaXMgRm9ybUNvbnRyb2wgKG91ciBjdXN0b20gY29tcG9uZW50KVxuICB1cGRhdGVNb2RlbCgpIHtcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLm9uQ2hhbmdlKG1vZGVsKTtcbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGFuIGFycmF5IHRoYXQgY29udGFpbnMgb3VyIGl0ZW1zXG4gIGdldE1vZGVsKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5tb2RlbC5pdGVtc107XG4gIH1cblxuICAvLyBDb250cm9sVmFsdWVBY2Nlc3NvciBob29rIHRoYXQgbGV0cyB1cyBjYWxsIHRoaXMuX29uQ2hhbmdlKHZhcikgdG8gbGV0IHRoZSBmb3JtIGtub3cgb3VyIHZhcmlhYmxlIGhhcyBjaGFuZ2VkIChpbiB0aGlzIGNhc2UgbW9kZWwpXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIC8vIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGhvb2sgKG5vdCB1c2VkKVxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KSB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICB9XG5cbiAgaXNTaW5nbGVNb2RlKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5TSU5HTEU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0iXX0=