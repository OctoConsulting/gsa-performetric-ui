/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, HostListener } from '@angular/core';
import { NavigationHelper } from '../common-navigation/navigation-helper';
var SdsHeaderComponent = /** @class */ (function () {
    function SdsHeaderComponent() {
        this.mobileNavActive = false;
        /**
         * Navigation helper
         */
        this.navigationHelper = new NavigationHelper();
        /**
         * determines if the top banner is shown
         */
        this.showTopBanner = true;
        this.topBannerDescription = '';
        /**
         * event for event based
         */
        this.linkEvent = new EventEmitter();
    }
    /**
     * Takes in a text string and removes all white space characters and returns the new string
     * @param text
     */
    /**
     * Takes in a text string and removes all white space characters and returns the new string
     * @param {?} text
     * @return {?}
     */
    SdsHeaderComponent.prototype.removeWhiteSpace = /**
     * Takes in a text string and removes all white space characters and returns the new string
     * @param {?} text
     * @return {?}
     */
    function (text) {
        return text.replace(/ /g, '');
    };
    /**
     * seeif any secondary link has a counter
     */
    /**
     * seeif any secondary link has a counter
     * @return {?}
     */
    SdsHeaderComponent.prototype.hasCounter = /**
     * seeif any secondary link has a counter
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hasCounter = false;
        if (this.model) {
            if (this.model.secondaryLinks) {
                this.model.secondaryLinks.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    if (item.hasCounter) {
                        hasCounter = true;
                    }
                }));
            }
        }
        return hasCounter;
    };
    /**
     * Deselects previous seletion
     * @param id
     */
    /**
     * Deselects previous seletion
     * @param {?} id
     * @return {?}
     */
    SdsHeaderComponent.prototype.select = /**
     * Deselects previous seletion
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.deselect();
        /** @type {?} */
        var item = this.find(id);
        if (item) {
            item.selected = true;
        }
    };
    /**
     * Deselects all the items in the header model
     */
    /**
     * Deselects all the items in the header model
     * @return {?}
     */
    SdsHeaderComponent.prototype.deselect = /**
     * Deselects all the items in the header model
     * @return {?}
     */
    function () {
        if (this.model) {
            if (this.model.home) {
                this.model.home.selected = false;
            }
            if (this.model.navigationLinks) {
                this.model.navigationLinks.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    item.selected = false;
                    if (item.children) {
                        item.children.forEach((/**
                         * @param {?} child
                         * @return {?}
                         */
                        function (child) {
                            child.selected = false;
                        }));
                    }
                }));
            }
            if (this.model.secondaryLinks) {
                this.model.secondaryLinks.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    item.selected = false;
                }));
            }
        }
    };
    /**
     * Finds the navigation element by id in the header model
     * @param id of the navigation item
     */
    /**
     * Finds the navigation element by id in the header model
     * @param {?} id of the navigation item
     * @return {?}
     */
    SdsHeaderComponent.prototype.find = /**
     * Finds the navigation element by id in the header model
     * @param {?} id of the navigation item
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var toReturn = null;
        if (this.model) {
            if (this.model.home) {
                if (this.model.home.id === id) {
                    toReturn = this.model.home;
                }
            }
            toReturn = this.findNavigationLinks(id, toReturn);
            if (this.model.secondaryLinks) {
                this.model.secondaryLinks.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    if (item.id === id) {
                        toReturn = item;
                    }
                }));
            }
        }
        return toReturn;
    };
    /**
     * Searchs the items in the navigation links
     * @param id
     */
    /**
     * Searchs the items in the navigation links
     * @private
     * @param {?} id
     * @param {?} toReturn
     * @return {?}
     */
    SdsHeaderComponent.prototype.findNavigationLinks = /**
     * Searchs the items in the navigation links
     * @private
     * @param {?} id
     * @param {?} toReturn
     * @return {?}
     */
    function (id, toReturn) {
        if (this.model.navigationLinks) {
            this.model.navigationLinks.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.id === id) {
                    toReturn = item;
                }
                if (item.children) {
                    item.children.forEach((/**
                     * @param {?} child
                     * @return {?}
                     */
                    function (child) {
                        if (child.id === id) {
                            toReturn = child;
                        }
                    }));
                }
            }));
        }
        return toReturn;
    };
    /**
     * Link clicked and emits the link data into an event
     * @param link
     */
    /**
     * Link clicked and emits the link data into an event
     * @param {?} link
     * @return {?}
     */
    SdsHeaderComponent.prototype.linkClickEvent = /**
     * Link clicked and emits the link data into an event
     * @param {?} link
     * @return {?}
     */
    function (link) {
        this.linkEvent.emit(link);
        return false;
    };
    // When the mobile nav is active, and the close box isn't visible,
    // we know the user's viewport has been resized to be larger.
    // Let's make the page state consistent by deactivating the mobile nav.
    // When the mobile nav is active, and the close box isn't visible,
    // we know the user's viewport has been resized to be larger.
    // Let's make the page state consistent by deactivating the mobile nav.
    /**
     * @param {?} event
     * @return {?}
     */
    SdsHeaderComponent.prototype.onBrowserResize = 
    // When the mobile nav is active, and the close box isn't visible,
    // we know the user's viewport has been resized to be larger.
    // Let's make the page state consistent by deactivating the mobile nav.
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.mobileNavActive &&
            this.closeNavBtn.nativeElement.getBoundingClientRect().width === 0) {
            this.mobileNavActive = false;
        }
    };
    /**
     * @return {?}
     */
    SdsHeaderComponent.prototype.openMobileNav = /**
     * @return {?}
     */
    function () {
        this.mobileNavActive = true;
    };
    /**
     * @return {?}
     */
    SdsHeaderComponent.prototype.closeMobileNav = /**
     * @return {?}
     */
    function () {
        this.mobileNavActive = false;
        // The mobile nav was just deactivated, and focus was on the close
        // button, which is no longer visible. We don't want the focus to
        // disappear into the void, so focus on the menu button if it's
        // visible (this may have been what the user was just focused on,
        // if they triggered the mobile nav by mistake).
        this.openNavBtn.nativeElement.focus();
    };
    // The mobile nav was just activated, so focus on the close button,
    // The mobile nav was just activated, so focus on the close button,
    /**
     * @return {?}
     */
    SdsHeaderComponent.prototype.navAnimationEnd = 
    // The mobile nav was just activated, so focus on the close button,
    /**
     * @return {?}
     */
    function () {
        this.closeNavBtn.nativeElement.focus();
    };
    SdsHeaderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sds-header',
                    template: "<sds-top-banner *ngIf=\"showTopBanner\" \n[description]=\"topBannerDescription\"\n></sds-top-banner>\n<div\n  class=\"usa-overlay\"\n  [class.is-visible]=\"mobileNavActive\"\n  (click)=\"closeMobileNav()\"\n></div>\n<header class=\"usa-header usa-header--extended\">\n  <div class=\"usa-navbar\">\n    <div class=\"usa-logo\" id=\"extended-logo\">\n      <ng-container\n        [ngTemplateOutlet]=\"\n          navigationHelper.isLinkInternal(model.home)\n            ? homeLinkRouteTemplate\n            : homeLinkHREFTemplate\n        \"\n        [ngTemplateOutletContext]=\"{ $implicit: model.home }\"\n      ></ng-container>\n    </div>\n    <button #usaNavOpen class=\"usa-menu-btn\" (click)=\"openMobileNav()\">\n      <fa-layers [fixedWidth]=\"true\" size=\"3x\">\n        <fa-icon\n          [icon]=\"['fas', 'square']\"\n          [classes]=\"['text-primary']\"\n        ></fa-icon>\n        <fa-icon\n          [icon]=\"['sds', 'bars']\"\n          [classes]=\"['icon-bars']\"\n          transform=\"shrink-6\"\n        ></fa-icon>\n        <fa-layers-counter\n          *ngIf=\"hasCounter()\"\n          [classes]=\"['icon-layers-counter']\"\n        ></fa-layers-counter>\n      </fa-layers>\n      <span class=\"usa-sr-only\">Menu</span>\n    </button>\n  </div>\n  <nav\n    aria-label=\"Primary navigation\"\n    class=\"usa-nav\"\n    (keydown.esc)=\"closeMobileNav()\"\n    (animationend)=\"navAnimationEnd()\"\n    [class.is-visible]=\"mobileNavActive\"\n    [cdkTrapFocus]=\"mobileNavActive\"\n  >\n    <div class=\"usa-nav__inner\">\n      <button #usaNavClose class=\"usa-nav__close\" (click)=\"closeMobileNav()\">\n        <fa-layers [fixedWidth]=\"true\" size=\"lg\">\n          <fa-icon\n            [icon]=\"['fas', 'circle']\"\n            [inverse]=\"true\"\n            transform=\"grow-2\"\n          ></fa-icon>\n          <fa-icon [icon]=\"['fas', 'times']\" transform=\"shrink-6\"></fa-icon>\n        </fa-layers>\n        <span class=\"usa-sr-only\">Close</span>\n      </button>\n      <ul class=\"usa-nav__primary usa-accordion\">\n        <li\n          *ngFor=\"let link of model.navigationLinks\"\n          class=\"usa-nav__primary-item\"\n        >\n          <ng-container\n            [ngTemplateOutlet]=\"link.route ? linkTemplate : dropDownTemplate\"\n            [ngTemplateOutletContext]=\"{ $implicit: link }\"\n          ></ng-container>\n        </li>\n      </ul>\n      <div class=\"usa-nav__secondary\">\n        <ul class=\"usa-nav__secondary-links\">\n          <li\n            *ngFor=\"let link of model.secondaryLinks\"\n            class=\"usa-nav__secondary-item\"\n          >\n            <ng-container\n              [ngTemplateOutlet]=\"\n                navigationHelper.isLinkInternal(link)\n                  ? secondaryRouteLinkTemplate\n                  : navigationHelper.isLinkExternal(link)\n                  ? secondaryHREFLinkTemplate\n                  : secondaryEVENTLinkTemplate\n              \"\n              [ngTemplateOutletContext]=\"{ $implicit: link }\"\n            ></ng-container>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n</header>\n<ng-template #homeLinkRouteTemplate let-home>\n  <a [routerLink]=\"home.route\" title=\"Home\" aria-label=\"Home\">\n    <img class=\"sds-header__logo\" [src]=\"home.logo\" [alt]=\"home.text\" />\n  </a>\n</ng-template>\n\n<ng-template #homeLinkHREFTemplate let-home>\n  <a [attr.href]=\"home.route\" title=\"Home\" aria-label=\"Home\">\n    <img class=\"sds-header__logo\" [src]=\"home.logo\" [alt]=\"home.text\" />\n  </a>\n</ng-template>\n\n<ng-template #secondaryRouteLinkTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    [routerLink]=\"[link.route]\"\n    [attr.class]=\"link.selected ? 'usa-current' : ''\"\n  >\n    <ng-container\n      [ngTemplateOutlet]=\"iconLinkTemplate\"\n      [ngTemplateOutletContext]=\"{ $implicit: link }\"\n    >\n    </ng-container>\n  </a>\n</ng-template>\n\n<ng-template #secondaryHREFLinkTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    [attr.href]=\"[link.route]\"\n    [attr.class]=\"link.selected ? 'usa-current' : ''\"\n  >\n    <ng-container\n      [ngTemplateOutlet]=\"iconLinkTemplate\"\n      [ngTemplateOutletContext]=\"{ $implicit: link }\"\n    >\n    </ng-container>\n  </a>\n</ng-template>\n\n<ng-template #secondaryEVENTLinkTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    (click)=\"linkClickEvent(link)\"\n    href=\"javascript:void(0)\"\n    [attr.class]=\"link.selected ? 'usa-current' : ''\"\n  >\n    <ng-container\n      [ngTemplateOutlet]=\"iconLinkTemplate\"\n      [ngTemplateOutletContext]=\"{ $implicit: link }\"\n    >\n    </ng-container>\n  </a>\n</ng-template>\n\n<ng-template #iconLinkTemplate let-link>\n  <fa-layers [fixedWidth]=\"true\">\n    <fa-icon [icon]=\"[link.imageClassPrefix, link.imageClass]\"></fa-icon>\n    <fa-layers-counter\n      *ngIf=\"link.hasCounter\"\n      [classes]=\"['icon-layers-counter']\"\n    ></fa-layers-counter>\n  </fa-layers>\n  <span class=\"sds-nav__secondary-item-text\">{{ link.text }}</span>\n</ng-template>\n\n<ng-template #linkTemplate let-link>\n  <ng-container\n    [ngTemplateOutlet]=\"\n      navigationHelper.isLinkInternal(link)\n        ? linkRouteTemplate\n        : navigationHelper.isLinkExternal(link)\n        ? linkHREFTemplate\n        : linkEventTemplate\n    \"\n    [ngTemplateOutletContext]=\"{ $implicit: link }\"\n  ></ng-container>\n</ng-template>\n\n<ng-template #linkRouteTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    [attr.class]=\"link.selected ? 'usa-nav__link usa-current' : 'usa-nav__link'\"\n    [routerLink]=\"[link.route]\"\n    ><span>{{ link.text }}</span></a\n  >\n</ng-template>\n\n<ng-template #linkHREFTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    [attr.class]=\"link.selected ? 'usa-nav__link usa-current' : 'usa-nav__link'\"\n    [attr.href]=\"[link.route]\"\n    ><span>{{ link.text }}</span></a\n  >\n</ng-template>\n\n<ng-template #linkEventTemplate let-link>\n  <a\n    [attr.id]=\"link.id\"\n    [attr.class]=\"link.selected ? 'usa-nav__link usa-current' : 'usa-nav__link'\"\n    href=\"javascript:void(0)\"\n    (click)=\"linkClickEvent(link)\"\n    ><span>{{ link.text }}</span></a\n  >\n</ng-template>\n\n<ng-template #dropDownTemplate let-link>\n  <button\n    [attr.id]=\"link.id\"\n    [attr.class]=\"\n      link.selected\n        ? 'usa-accordion__button usa-nav__link usa-current'\n        : 'usa-accordion__button usa-nav__link'\n    \"\n    aria-expanded=\"false\"\n    [attr.aria-controls]=\"removeWhiteSpace(link.text) + '-section'\"\n  >\n    <span>{{ link.text }}</span>\n  </button>\n  <ul\n    [attr.id]=\"removeWhiteSpace(link.text) + '-section'\"\n    class=\"usa-nav__submenu\"\n    hidden\n  >\n    <li *ngFor=\"let childLink of link.children\" class=\"usa-nav__submenu-item\">\n      <ng-container\n        [ngTemplateOutlet]=\"\n          navigationHelper.isLinkInternal(childLink)\n            ? dropDownRouteLinkTemplate\n            : navigationHelper.isLinkExternal(childLink)\n            ? dropDownHREFLinkTemplate\n            : dropDownEVENTLinkTemplate\n        \"\n        [ngTemplateOutletContext]=\"{ $implicit: childLink }\"\n      ></ng-container>\n    </li>\n  </ul>\n</ng-template>\n\n<ng-template #dropDownRouteLinkTemplate let-childLink>\n  <a [routerLink]=\"[childLink.route]\">{{ childLink.text }}</a>\n</ng-template>\n\n<ng-template #dropDownHREFLinkTemplate let-childLink>\n  <a [attr.href]=\"[childLink.route]\">{{ childLink.text }}</a>\n</ng-template>\n\n<ng-template #dropDownEVENTLinkTemplate let-childLink>\n  <a href=\"javascript:void(0)\" (click)=\"linkClickEvent(childLink)\">{{\n    childLink.text\n  }}</a>\n</ng-template>\n",
                    styles: [""]
                }] }
    ];
    SdsHeaderComponent.propDecorators = {
        openNavBtn: [{ type: ViewChild, args: ['usaNavOpen',] }],
        closeNavBtn: [{ type: ViewChild, args: ['usaNavClose',] }],
        showTopBanner: [{ type: Input }],
        model: [{ type: Input }],
        topBannerDescription: [{ type: Input }],
        linkEvent: [{ type: Output }],
        onBrowserResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
    };
    return SdsHeaderComponent;
}());
export { SdsHeaderComponent };
if (false) {
    /** @type {?} */
    SdsHeaderComponent.prototype.openNavBtn;
    /** @type {?} */
    SdsHeaderComponent.prototype.closeNavBtn;
    /** @type {?} */
    SdsHeaderComponent.prototype.mobileNavActive;
    /**
     * Navigation helper
     * @type {?}
     */
    SdsHeaderComponent.prototype.navigationHelper;
    /**
     * determines if the top banner is shown
     * @type {?}
     */
    SdsHeaderComponent.prototype.showTopBanner;
    /**
     * Model used for the different display portions of the header
     * @type {?}
     */
    SdsHeaderComponent.prototype.model;
    /** @type {?} */
    SdsHeaderComponent.prototype.topBannerDescription;
    /**
     * event for event based
     * @type {?}
     */
    SdsHeaderComponent.prototype.linkEvent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL2NvbXBvbmVudHMvIiwic291cmNlcyI6WyJsaWIvaGVhZGVyL2hlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHNUcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDMUU7SUFBQTtRQVNFLG9CQUFlLEdBQUcsS0FBSyxDQUFDOzs7O1FBSXhCLHFCQUFnQixHQUFHLElBQUksZ0JBQWdCLEVBQUUsQ0FBQzs7OztRQUtqQyxrQkFBYSxHQUFZLElBQUksQ0FBQztRQU85Qix5QkFBb0IsR0FBVyxFQUFFLENBQUM7Ozs7UUFrSDNDLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBbUIsQ0FBQztJQTRDbEQsQ0FBQztJQTdKQzs7O09BR0c7Ozs7OztJQUNILDZDQUFnQjs7Ozs7SUFBaEIsVUFBaUIsSUFBWTtRQUMzQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSCx1Q0FBVTs7OztJQUFWOztZQUNNLFVBQVUsR0FBRyxLQUFLO1FBQ3RCLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQU87Ozs7Z0JBQUMsVUFBVSxJQUF5QjtvQkFDbkUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO3dCQUNuQixVQUFVLEdBQUcsSUFBSSxDQUFDO3FCQUNuQjtnQkFDSCxDQUFDLEVBQUMsQ0FBQzthQUNKO1NBQ0Y7UUFDRCxP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Ozs2QkFHRSxTQUFTLFNBQUMsWUFBWTs4QkFDdEIsU0FBUyxTQUFDLGFBQWE7Z0NBVXZCLEtBQUs7d0JBS0wsS0FBSzt1Q0FFTCxLQUFLOzRCQWlITCxNQUFNO2tDQWVOLFlBQVksU0FBQyxlQUFlLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0lBOEIzQyx5QkFBQztDQUFBLEFBdkxELElBdUxDO1NBbExZLGtCQUFrQjs7O0lBRTdCLHdDQUFnRDs7SUFDaEQseUNBQWtEOztJQUNsRCw2Q0FBd0I7Ozs7O0lBSXhCLDhDQUEwQzs7Ozs7SUFLMUMsMkNBQXVDOzs7OztJQUt2QyxtQ0FBNEI7O0lBRTVCLGtEQUEyQzs7Ozs7SUFpSDNDLHVDQUNnRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSGVhZGVyTW9kZWwsIEhlYWRlck5hdmlnYXRpb25MaW5rLCBIZWFkZXJTZWNvbmRhcnlMaW5rIH0gZnJvbSAnLi9tb2RlbC9IZWFkZXJNb2RlbCc7XG5pbXBvcnQgeyBJTmF2aWdhdGlvbkxpbmssIE5hdmlnYXRpb25Nb2RlLCBTZWxlY3RhYmxlIH0gZnJvbSAnLi4vY29tbW9uLW5hdmlnYXRpb24vY29tbW9uLW5hdmlnYXRpb24tbW9kZWwnO1xuaW1wb3J0IHsgTmF2aWdhdGlvbkhlbHBlciB9IGZyb20gJy4uL2NvbW1vbi1uYXZpZ2F0aW9uL25hdmlnYXRpb24taGVscGVyJztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Nkcy1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vaGVhZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaGVhZGVyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2RzSGVhZGVyQ29tcG9uZW50IHtcblxuICBAVmlld0NoaWxkKCd1c2FOYXZPcGVuJykgb3Blbk5hdkJ0bjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgndXNhTmF2Q2xvc2UnKSBjbG9zZU5hdkJ0bjogRWxlbWVudFJlZjtcbiAgbW9iaWxlTmF2QWN0aXZlID0gZmFsc2U7XG4gIC8qKlxuICAqIE5hdmlnYXRpb24gaGVscGVyXG4gICovXG4gIG5hdmlnYXRpb25IZWxwZXIgPSBuZXcgTmF2aWdhdGlvbkhlbHBlcigpO1xuXG4gIC8qKlxuICAgKiBkZXRlcm1pbmVzIGlmIHRoZSB0b3AgYmFubmVyIGlzIHNob3duXG4gICAqL1xuICBASW5wdXQoKSBzaG93VG9wQmFubmVyOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogTW9kZWwgdXNlZCBmb3IgdGhlIGRpZmZlcmVudCBkaXNwbGF5IHBvcnRpb25zIG9mIHRoZSBoZWFkZXJcbiAgICovXG4gIEBJbnB1dCgpIG1vZGVsOiBIZWFkZXJNb2RlbDtcblxuICBASW5wdXQoKSB0b3BCYW5uZXJEZXNjcmlwdGlvbjogc3RyaW5nID0gJyc7XG4gIC8qKlxuICAgKiBUYWtlcyBpbiBhIHRleHQgc3RyaW5nIGFuZCByZW1vdmVzIGFsbCB3aGl0ZSBzcGFjZSBjaGFyYWN0ZXJzIGFuZCByZXR1cm5zIHRoZSBuZXcgc3RyaW5nXG4gICAqIEBwYXJhbSB0ZXh0XG4gICAqL1xuICByZW1vdmVXaGl0ZVNwYWNlKHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoLyAvZywgJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNlZWlmIGFueSBzZWNvbmRhcnkgbGluayBoYXMgYSBjb3VudGVyXG4gICAqL1xuICBoYXNDb3VudGVyKCk6IGJvb2xlYW4ge1xuICAgIGxldCBoYXNDb3VudGVyID0gZmFsc2U7XG4gICAgaWYgKHRoaXMubW9kZWwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGVsLnNlY29uZGFyeUxpbmtzKSB7XG4gICAgICAgIHRoaXMubW9kZWwuc2Vjb25kYXJ5TGlua3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbTogSGVhZGVyU2Vjb25kYXJ5TGluaykge1xuICAgICAgICAgIGlmIChpdGVtLmhhc0NvdW50ZXIpIHtcbiAgICAgICAgICAgIGhhc0NvdW50ZXIgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXNDb3VudGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc2VsZWN0cyBwcmV2aW91cyBzZWxldGlvblxuICAgKiBAcGFyYW0gaWRcbiAgICovXG4gIHNlbGVjdChpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5kZXNlbGVjdCgpO1xuICAgIGxldCBpdGVtID0gdGhpcy5maW5kKGlkKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc2VsZWN0cyBhbGwgdGhlIGl0ZW1zIGluIHRoZSBoZWFkZXIgbW9kZWxcbiAgICovXG4gIGRlc2VsZWN0KCkge1xuICAgIGlmICh0aGlzLm1vZGVsKSB7XG4gICAgICBpZiAodGhpcy5tb2RlbC5ob21lKSB7XG4gICAgICAgIHRoaXMubW9kZWwuaG9tZS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kZWwubmF2aWdhdGlvbkxpbmtzKSB7XG4gICAgICAgIHRoaXMubW9kZWwubmF2aWdhdGlvbkxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW06IEhlYWRlck5hdmlnYXRpb25MaW5rKSB7XG4gICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkOiBIZWFkZXJOYXZpZ2F0aW9uTGluaykge1xuICAgICAgICAgICAgICBjaGlsZC5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGVsLnNlY29uZGFyeUxpbmtzKSB7XG4gICAgICAgIHRoaXMubW9kZWwuc2Vjb25kYXJ5TGlua3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbTogSGVhZGVyU2Vjb25kYXJ5TGluaykge1xuICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBuYXZpZ2F0aW9uIGVsZW1lbnQgYnkgaWQgaW4gdGhlIGhlYWRlciBtb2RlbFxuICAgKiBAcGFyYW0gaWQgb2YgdGhlIG5hdmlnYXRpb24gaXRlbVxuICAgKi9cbiAgZmluZChpZDogc3RyaW5nKTogU2VsZWN0YWJsZSB7XG4gICAgbGV0IHRvUmV0dXJuID0gbnVsbDtcbiAgICBpZiAodGhpcy5tb2RlbCkge1xuICAgICAgaWYgKHRoaXMubW9kZWwuaG9tZSkge1xuICAgICAgICBpZiAodGhpcy5tb2RlbC5ob21lLmlkID09PSBpZCkge1xuICAgICAgICAgIHRvUmV0dXJuID0gdGhpcy5tb2RlbC5ob21lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0b1JldHVybiA9IHRoaXMuZmluZE5hdmlnYXRpb25MaW5rcyhpZCwgdG9SZXR1cm4pO1xuICAgICAgaWYgKHRoaXMubW9kZWwuc2Vjb25kYXJ5TGlua3MpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5zZWNvbmRhcnlMaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtOiBIZWFkZXJTZWNvbmRhcnlMaW5rKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICB0b1JldHVybiA9IGl0ZW07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvUmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaHMgdGhlIGl0ZW1zIGluIHRoZSBuYXZpZ2F0aW9uIGxpbmtzXG4gICAqIEBwYXJhbSBpZFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kTmF2aWdhdGlvbkxpbmtzKGlkOiBzdHJpbmcsIHRvUmV0dXJuOiBTZWxlY3RhYmxlKTogU2VsZWN0YWJsZSB7XG4gICAgaWYgKHRoaXMubW9kZWwubmF2aWdhdGlvbkxpbmtzKSB7XG4gICAgICB0aGlzLm1vZGVsLm5hdmlnYXRpb25MaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtOiBIZWFkZXJOYXZpZ2F0aW9uTGluaykge1xuICAgICAgICBpZiAoaXRlbS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICB0b1JldHVybiA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkOiBIZWFkZXJOYXZpZ2F0aW9uTGluaykge1xuICAgICAgICAgICAgaWYgKGNoaWxkLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICB0b1JldHVybiA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRvUmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIGV2ZW50IGZvciBldmVudCBiYXNlZFxuICAgKi9cbiAgQE91dHB1dCgpXG4gIGxpbmtFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8SU5hdmlnYXRpb25MaW5rPigpO1xuXG4gIC8qKlxuICAgKiBMaW5rIGNsaWNrZWQgYW5kIGVtaXRzIHRoZSBsaW5rIGRhdGEgaW50byBhbiBldmVudFxuICAgKiBAcGFyYW0gbGlua1xuICAgKi9cbiAgbGlua0NsaWNrRXZlbnQobGluazogSU5hdmlnYXRpb25MaW5rKSB7XG4gICAgdGhpcy5saW5rRXZlbnQuZW1pdChsaW5rKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBXaGVuIHRoZSBtb2JpbGUgbmF2IGlzIGFjdGl2ZSwgYW5kIHRoZSBjbG9zZSBib3ggaXNuJ3QgdmlzaWJsZSxcbiAgLy8gd2Uga25vdyB0aGUgdXNlcidzIHZpZXdwb3J0IGhhcyBiZWVuIHJlc2l6ZWQgdG8gYmUgbGFyZ2VyLlxuICAvLyBMZXQncyBtYWtlIHRoZSBwYWdlIHN0YXRlIGNvbnNpc3RlbnQgYnkgZGVhY3RpdmF0aW5nIHRoZSBtb2JpbGUgbmF2LlxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgb25Ccm93c2VyUmVzaXplKGV2ZW50KSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5tb2JpbGVOYXZBY3RpdmUgJiZcbiAgICAgIHRoaXMuY2xvc2VOYXZCdG4ubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA9PT0gMFxuICAgICkge1xuICAgICAgdGhpcy5tb2JpbGVOYXZBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBvcGVuTW9iaWxlTmF2KCkge1xuICAgIHRoaXMubW9iaWxlTmF2QWN0aXZlID0gdHJ1ZTtcbiAgfVxuXG4gIGNsb3NlTW9iaWxlTmF2KCkge1xuICAgIHRoaXMubW9iaWxlTmF2QWN0aXZlID0gZmFsc2U7XG4gICAgLy8gVGhlIG1vYmlsZSBuYXYgd2FzIGp1c3QgZGVhY3RpdmF0ZWQsIGFuZCBmb2N1cyB3YXMgb24gdGhlIGNsb3NlXG4gICAgLy8gYnV0dG9uLCB3aGljaCBpcyBubyBsb25nZXIgdmlzaWJsZS4gV2UgZG9uJ3Qgd2FudCB0aGUgZm9jdXMgdG9cbiAgICAvLyBkaXNhcHBlYXIgaW50byB0aGUgdm9pZCwgc28gZm9jdXMgb24gdGhlIG1lbnUgYnV0dG9uIGlmIGl0J3NcbiAgICAvLyB2aXNpYmxlICh0aGlzIG1heSBoYXZlIGJlZW4gd2hhdCB0aGUgdXNlciB3YXMganVzdCBmb2N1c2VkIG9uLFxuICAgIC8vIGlmIHRoZXkgdHJpZ2dlcmVkIHRoZSBtb2JpbGUgbmF2IGJ5IG1pc3Rha2UpLlxuICAgIHRoaXMub3Blbk5hdkJ0bi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuICAvLyBUaGUgbW9iaWxlIG5hdiB3YXMganVzdCBhY3RpdmF0ZWQsIHNvIGZvY3VzIG9uIHRoZSBjbG9zZSBidXR0b24sXG4gIG5hdkFuaW1hdGlvbkVuZCgpIHtcbiAgICB0aGlzLmNsb3NlTmF2QnRuLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuXG5cbn1cbiJdfQ==