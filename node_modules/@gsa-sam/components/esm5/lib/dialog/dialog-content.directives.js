/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, Optional, ElementRef, } from '@angular/core';
import { SdsDialogService } from './dialog';
import { SdsDialogRef } from './dialog-ref';
/**
 * Counter used to generate unique IDs for dialog elements.
 * @type {?}
 */
var dialogElementUid = 0;
/**
 * Button that will close the current dialog.
 */
var SdsDialogCloseDirective = /** @class */ (function () {
    function SdsDialogCloseDirective(dialogRef, _elementRef, _dialog) {
        this.dialogRef = dialogRef;
        this._elementRef = _elementRef;
        this._dialog = _dialog;
    }
    /**
     * @return {?}
     */
    SdsDialogCloseDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.dialogRef) {
            // When this directive is included in a dialog via TemplateRef (rather than being
            // in a Component), the DialogRef isn't available via injection because embedded
            // views cannot be given a custom injector. Instead, we look up the DialogRef by
            // ID. This must occur in `onInit`, as the ID binding for the dialog container won't
            // be resolved at constructor time.
            this.dialogRef = (/** @type {?} */ (getClosestDialog(this._elementRef, this._dialog.openDialogs)));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    SdsDialogCloseDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var proxiedChange = changes['_sdsDialogClose'] || changes['_sdsDialogCloseResult'];
        if (proxiedChange) {
            this.dialogResult = proxiedChange.currentValue;
        }
    };
    SdsDialogCloseDirective.decorators = [
        { type: Directive, args: [{
                    selector: "button[sds-dialog-close], button[sdsDialogClose]",
                    exportAs: 'sdsDialogClose',
                    // tslint:disable-next-line: use-host-property-decorator
                    host: {
                        '(click)': 'dialogRef.close(dialogResult)',
                        '[attr.aria-label]': 'ariaLabel || null',
                        'type': 'button',
                    }
                },] }
    ];
    /** @nocollapse */
    SdsDialogCloseDirective.ctorParameters = function () { return [
        { type: SdsDialogRef, decorators: [{ type: Optional }] },
        { type: ElementRef },
        { type: SdsDialogService }
    ]; };
    SdsDialogCloseDirective.propDecorators = {
        ariaLabel: [{ type: Input, args: ['aria-label',] }],
        dialogResult: [{ type: Input, args: ['sds-dialog-close',] }],
        _sdsDialogClose: [{ type: Input, args: ['sdsDialogClose',] }]
    };
    return SdsDialogCloseDirective;
}());
export { SdsDialogCloseDirective };
if (false) {
    /**
     * Screenreader label for the button.
     * @type {?}
     */
    SdsDialogCloseDirective.prototype.ariaLabel;
    /**
     * Dialog close input.
     * @type {?}
     */
    SdsDialogCloseDirective.prototype.dialogResult;
    /** @type {?} */
    SdsDialogCloseDirective.prototype._sdsDialogClose;
    /** @type {?} */
    SdsDialogCloseDirective.prototype.dialogRef;
    /**
     * @type {?}
     * @private
     */
    SdsDialogCloseDirective.prototype._elementRef;
    /**
     * @type {?}
     * @private
     */
    SdsDialogCloseDirective.prototype._dialog;
}
/**
 * Title of a dialog element. Stays fixed to the top of the dialog when scrolling.
 */
var SdsDialogTitleDirective = /** @class */ (function () {
    function SdsDialogTitleDirective(_dialogRef, _elementRef, _dialog) {
        this._dialogRef = _dialogRef;
        this._elementRef = _elementRef;
        this._dialog = _dialog;
        this.id = "sds-dialog-title-" + dialogElementUid++;
    }
    /**
     * @return {?}
     */
    SdsDialogTitleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this._dialogRef) {
            this._dialogRef = (/** @type {?} */ (getClosestDialog(this._elementRef, this._dialog.openDialogs)));
        }
        if (this._dialogRef) {
            Promise.resolve().then((/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var container = _this._dialogRef._containerInstance;
                if (container && !container._ariaLabelledBy) {
                    container._ariaLabelledBy = _this.id;
                }
            }));
        }
    };
    SdsDialogTitleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[sds-dialog-title], [sdsDialogTitle]',
                    exportAs: 'sdsDialogTitle',
                    // tslint:disable-next-line: use-host-property-decorator
                    host: {
                        '[class.sds-dialog-title]': 'true',
                        '[id]': 'id',
                    },
                },] }
    ];
    /** @nocollapse */
    SdsDialogTitleDirective.ctorParameters = function () { return [
        { type: SdsDialogRef, decorators: [{ type: Optional }] },
        { type: ElementRef },
        { type: SdsDialogService }
    ]; };
    SdsDialogTitleDirective.propDecorators = {
        id: [{ type: Input }]
    };
    return SdsDialogTitleDirective;
}());
export { SdsDialogTitleDirective };
if (false) {
    /** @type {?} */
    SdsDialogTitleDirective.prototype.id;
    /**
     * @type {?}
     * @private
     */
    SdsDialogTitleDirective.prototype._dialogRef;
    /**
     * @type {?}
     * @private
     */
    SdsDialogTitleDirective.prototype._elementRef;
    /**
     * @type {?}
     * @private
     */
    SdsDialogTitleDirective.prototype._dialog;
}
/**
 * SubTitle of a dialog element
 */
var SdsDialogSubtitleDirective = /** @class */ (function () {
    function SdsDialogSubtitleDirective() {
    }
    SdsDialogSubtitleDirective.decorators = [
        { type: Directive, args: [{
                    selector: "[sds-dialog-subtitle], sds-dialog-subtitle, [sdsDialogSubtitle]",
                    // tslint:disable-next-line: use-host-property-decorator
                    host: { '[class.sds-dialog-subtitle]': 'true' }
                },] }
    ];
    return SdsDialogSubtitleDirective;
}());
export { SdsDialogSubtitleDirective };
/**
 * Scrollable content container of a dialog.
 */
var SdsDialogContentDirective = /** @class */ (function () {
    function SdsDialogContentDirective() {
    }
    SdsDialogContentDirective.decorators = [
        { type: Directive, args: [{
                    selector: "[sds-dialog-content], sds-dialog-content, [sdsDialogContent]",
                    // tslint:disable-next-line: use-host-property-decorator
                    host: { '[class.sds-dialog-content]': 'true' }
                },] }
    ];
    return SdsDialogContentDirective;
}());
export { SdsDialogContentDirective };
/**
 * Container for the bottom action buttons in a dialog.
 * Stays fixed to the bottom when scrolling.
 */
var SdsDialogActionsDirective = /** @class */ (function () {
    function SdsDialogActionsDirective() {
    }
    SdsDialogActionsDirective.decorators = [
        { type: Directive, args: [{
                    selector: "[sds-dialog-actions], sds-dialog-actions, [sdsDialogActions]",
                    // tslint:disable-next-line: use-host-property-decorator
                    host: { '[class.sds-dialog-actions]': 'true' }
                },] }
    ];
    return SdsDialogActionsDirective;
}());
export { SdsDialogActionsDirective };
/**
 * Finds the closest SdsDialogRef to an element by looking at the DOM.
 * @param {?} element Element relative to which to look for a dialog.
 * @param {?} openDialogs References to the currently-open dialogs.
 * @return {?}
 */
function getClosestDialog(element, openDialogs) {
    /** @type {?} */
    var parent = element.nativeElement.parentElement;
    while (parent && !parent.classList.contains('sds-dialog__container')) {
        parent = parent.parentElement;
    }
    return parent ? openDialogs.find((/**
     * @param {?} dialog
     * @return {?}
     */
    function (dialog) { return dialog.id === (/** @type {?} */ (parent)).id; })) : null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLWNvbnRlbnQuZGlyZWN0aXZlcy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL2NvbXBvbmVudHMvIiwic291cmNlcyI6WyJsaWIvZGlhbG9nL2RpYWxvZy1jb250ZW50LmRpcmVjdGl2ZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUdMLFFBQVEsRUFFUixVQUFVLEdBQ1gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQzFDLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxjQUFjLENBQUM7Ozs7O0lBR3RDLGdCQUFnQixHQUFHLENBQUM7Ozs7QUFLeEI7SUFtQkUsaUNBQ3FCLFNBQTRCLEVBQ3ZDLFdBQW9DLEVBQ3BDLE9BQXlCO1FBRmQsY0FBUyxHQUFULFNBQVMsQ0FBbUI7UUFDdkMsZ0JBQVcsR0FBWCxXQUFXLENBQXlCO1FBQ3BDLFlBQU8sR0FBUCxPQUFPLENBQWtCO0lBQUcsQ0FBQzs7OztJQUV2QywwQ0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNuQixpRkFBaUY7WUFDakYsZ0ZBQWdGO1lBQ2hGLGdGQUFnRjtZQUNoRixvRkFBb0Y7WUFDcEYsbUNBQW1DO1lBQ25DLElBQUksQ0FBQyxTQUFTLEdBQUcsbUJBQUEsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUFDLENBQUM7U0FDaEY7SUFDSCxDQUFDOzs7OztJQUVELDZDQUFXOzs7O0lBQVgsVUFBWSxPQUFzQjs7WUFDMUIsYUFBYSxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztRQUVwRixJQUFJLGFBQWEsRUFBRTtZQUNqQixJQUFJLENBQUMsWUFBWSxHQUFHLGFBQWEsQ0FBQyxZQUFZ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LDRCQUE0QixFQUFFLE1BQU0sRUFBQztpQkFDN0M7O0lBQ3VDLGdDQUFDO0NBQUEsQUFMekMsSUFLeUM7U0FBNUIseUJBQXlCOzs7Ozs7O0FBUXRDLFNBQVMsZ0JBQWdCLENBQUMsT0FBZ0MsRUFBRSxXQUFnQzs7UUFDdEYsTUFBTSxHQUF1QixPQUFPLENBQUMsYUFBYSxDQUFDLGFBQWE7SUFFcEUsT0FBTyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1FBQ3BFLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0tBQy9CO0lBRUQsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJOzs7O0lBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsRUFBRSxLQUFLLG1CQUFBLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBeEIsQ0FBd0IsRUFBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDOUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERpcmVjdGl2ZSxcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgRWxlbWVudFJlZixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1Nkc0RpYWxvZ1NlcnZpY2V9IGZyb20gJy4vZGlhbG9nJztcbmltcG9ydCB7U2RzRGlhbG9nUmVmfSBmcm9tICcuL2RpYWxvZy1yZWYnO1xuXG4vKiogQ291bnRlciB1c2VkIHRvIGdlbmVyYXRlIHVuaXF1ZSBJRHMgZm9yIGRpYWxvZyBlbGVtZW50cy4gKi9cbmxldCBkaWFsb2dFbGVtZW50VWlkID0gMDtcblxuLyoqXG4gKiBCdXR0b24gdGhhdCB3aWxsIGNsb3NlIHRoZSBjdXJyZW50IGRpYWxvZy5cbiAqL1xuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiBgYnV0dG9uW3Nkcy1kaWFsb2ctY2xvc2VdLCBidXR0b25bc2RzRGlhbG9nQ2xvc2VdYCxcbiAgZXhwb3J0QXM6ICdzZHNEaWFsb2dDbG9zZScsXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogdXNlLWhvc3QtcHJvcGVydHktZGVjb3JhdG9yXG4gIGhvc3Q6IHtcbiAgICAnKGNsaWNrKSc6ICdkaWFsb2dSZWYuY2xvc2UoZGlhbG9nUmVzdWx0KScsXG4gICAgJ1thdHRyLmFyaWEtbGFiZWxdJzogJ2FyaWFMYWJlbCB8fCBudWxsJyxcbiAgICAndHlwZSc6ICdidXR0b24nLCAvLyBQcmV2ZW50cyBhY2NpZGVudGFsIGZvcm0gc3VibWl0cy5cbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBTZHNEaWFsb2dDbG9zZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgLyoqIFNjcmVlbnJlYWRlciBsYWJlbCBmb3IgdGhlIGJ1dHRvbi4gKi9cbiAgQElucHV0KCdhcmlhLWxhYmVsJykgYXJpYUxhYmVsOiBzdHJpbmc7XG5cbiAgLyoqIERpYWxvZyBjbG9zZSBpbnB1dC4gKi9cbiAgQElucHV0KCdzZHMtZGlhbG9nLWNsb3NlJykgZGlhbG9nUmVzdWx0OiBhbnk7XG5cbiAgQElucHV0KCdzZHNEaWFsb2dDbG9zZScpIF9zZHNEaWFsb2dDbG9zZTogYW55O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBPcHRpb25hbCgpIHB1YmxpYyBkaWFsb2dSZWY6IFNkc0RpYWxvZ1JlZjxhbnk+LFxuICAgIHByaXZhdGUgX2VsZW1lbnRSZWY6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+LFxuICAgIHByaXZhdGUgX2RpYWxvZzogU2RzRGlhbG9nU2VydmljZSkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZGlhbG9nUmVmKSB7XG4gICAgICAvLyBXaGVuIHRoaXMgZGlyZWN0aXZlIGlzIGluY2x1ZGVkIGluIGEgZGlhbG9nIHZpYSBUZW1wbGF0ZVJlZiAocmF0aGVyIHRoYW4gYmVpbmdcbiAgICAgIC8vIGluIGEgQ29tcG9uZW50KSwgdGhlIERpYWxvZ1JlZiBpc24ndCBhdmFpbGFibGUgdmlhIGluamVjdGlvbiBiZWNhdXNlIGVtYmVkZGVkXG4gICAgICAvLyB2aWV3cyBjYW5ub3QgYmUgZ2l2ZW4gYSBjdXN0b20gaW5qZWN0b3IuIEluc3RlYWQsIHdlIGxvb2sgdXAgdGhlIERpYWxvZ1JlZiBieVxuICAgICAgLy8gSUQuIFRoaXMgbXVzdCBvY2N1ciBpbiBgb25Jbml0YCwgYXMgdGhlIElEIGJpbmRpbmcgZm9yIHRoZSBkaWFsb2cgY29udGFpbmVyIHdvbid0XG4gICAgICAvLyBiZSByZXNvbHZlZCBhdCBjb25zdHJ1Y3RvciB0aW1lLlxuICAgICAgdGhpcy5kaWFsb2dSZWYgPSBnZXRDbG9zZXN0RGlhbG9nKHRoaXMuX2VsZW1lbnRSZWYsIHRoaXMuX2RpYWxvZy5vcGVuRGlhbG9ncykhO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBjb25zdCBwcm94aWVkQ2hhbmdlID0gY2hhbmdlc1snX3Nkc0RpYWxvZ0Nsb3NlJ10gfHwgY2hhbmdlc1snX3Nkc0RpYWxvZ0Nsb3NlUmVzdWx0J107XG5cbiAgICBpZiAocHJveGllZENoYW5nZSkge1xuICAgICAgdGhpcy5kaWFsb2dSZXN1bHQgPSBwcm94aWVkQ2hhbmdlLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaXRsZSBvZiBhIGRpYWxvZyBlbGVtZW50LiBTdGF5cyBmaXhlZCB0byB0aGUgdG9wIG9mIHRoZSBkaWFsb2cgd2hlbiBzY3JvbGxpbmcuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tzZHMtZGlhbG9nLXRpdGxlXSwgW3Nkc0RpYWxvZ1RpdGxlXScsXG4gIGV4cG9ydEFzOiAnc2RzRGlhbG9nVGl0bGUnLFxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHVzZS1ob3N0LXByb3BlcnR5LWRlY29yYXRvclxuICBob3N0OiB7XG4gICAgJ1tjbGFzcy5zZHMtZGlhbG9nLXRpdGxlXSc6ICd0cnVlJyxcbiAgICAnW2lkXSc6ICdpZCcsXG4gIH0sXG59KVxuZXhwb3J0IGNsYXNzIFNkc0RpYWxvZ1RpdGxlRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgaWQgPSBgc2RzLWRpYWxvZy10aXRsZS0ke2RpYWxvZ0VsZW1lbnRVaWQrK31gO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgX2RpYWxvZ1JlZjogU2RzRGlhbG9nUmVmPGFueT4sXG4gICAgcHJpdmF0ZSBfZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4sXG4gICAgcHJpdmF0ZSBfZGlhbG9nOiBTZHNEaWFsb2dTZXJ2aWNlKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICghdGhpcy5fZGlhbG9nUmVmKSB7XG4gICAgICB0aGlzLl9kaWFsb2dSZWYgPSBnZXRDbG9zZXN0RGlhbG9nKHRoaXMuX2VsZW1lbnRSZWYsIHRoaXMuX2RpYWxvZy5vcGVuRGlhbG9ncykhO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kaWFsb2dSZWYpIHtcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9kaWFsb2dSZWYuX2NvbnRhaW5lckluc3RhbmNlO1xuXG4gICAgICAgIGlmIChjb250YWluZXIgJiYgIWNvbnRhaW5lci5fYXJpYUxhYmVsbGVkQnkpIHtcbiAgICAgICAgICBjb250YWluZXIuX2FyaWFMYWJlbGxlZEJ5ID0gdGhpcy5pZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU3ViVGl0bGUgb2YgYSBkaWFsb2cgZWxlbWVudFxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6IGBbc2RzLWRpYWxvZy1zdWJ0aXRsZV0sIHNkcy1kaWFsb2ctc3VidGl0bGUsIFtzZHNEaWFsb2dTdWJ0aXRsZV1gLFxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHVzZS1ob3N0LXByb3BlcnR5LWRlY29yYXRvclxuICBob3N0OiB7J1tjbGFzcy5zZHMtZGlhbG9nLXN1YnRpdGxlXSc6ICd0cnVlJ31cbn0pXG5leHBvcnQgY2xhc3MgU2RzRGlhbG9nU3VidGl0bGVEaXJlY3RpdmUge31cblxuXG4vKipcbiAqIFNjcm9sbGFibGUgY29udGVudCBjb250YWluZXIgb2YgYSBkaWFsb2cuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogYFtzZHMtZGlhbG9nLWNvbnRlbnRdLCBzZHMtZGlhbG9nLWNvbnRlbnQsIFtzZHNEaWFsb2dDb250ZW50XWAsXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogdXNlLWhvc3QtcHJvcGVydHktZGVjb3JhdG9yXG4gIGhvc3Q6IHsnW2NsYXNzLnNkcy1kaWFsb2ctY29udGVudF0nOiAndHJ1ZSd9XG59KVxuZXhwb3J0IGNsYXNzIFNkc0RpYWxvZ0NvbnRlbnREaXJlY3RpdmUge31cblxuXG4vKipcbiAqIENvbnRhaW5lciBmb3IgdGhlIGJvdHRvbSBhY3Rpb24gYnV0dG9ucyBpbiBhIGRpYWxvZy5cbiAqIFN0YXlzIGZpeGVkIHRvIHRoZSBib3R0b20gd2hlbiBzY3JvbGxpbmcuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogYFtzZHMtZGlhbG9nLWFjdGlvbnNdLCBzZHMtZGlhbG9nLWFjdGlvbnMsIFtzZHNEaWFsb2dBY3Rpb25zXWAsXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogdXNlLWhvc3QtcHJvcGVydHktZGVjb3JhdG9yXG4gIGhvc3Q6IHsnW2NsYXNzLnNkcy1kaWFsb2ctYWN0aW9uc10nOiAndHJ1ZSd9XG59KVxuZXhwb3J0IGNsYXNzIFNkc0RpYWxvZ0FjdGlvbnNEaXJlY3RpdmUge31cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IFNkc0RpYWxvZ1JlZiB0byBhbiBlbGVtZW50IGJ5IGxvb2tpbmcgYXQgdGhlIERPTS5cbiAqIEBwYXJhbSBlbGVtZW50IEVsZW1lbnQgcmVsYXRpdmUgdG8gd2hpY2ggdG8gbG9vayBmb3IgYSBkaWFsb2cuXG4gKiBAcGFyYW0gb3BlbkRpYWxvZ3MgUmVmZXJlbmNlcyB0byB0aGUgY3VycmVudGx5LW9wZW4gZGlhbG9ncy5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2xvc2VzdERpYWxvZyhlbGVtZW50OiBFbGVtZW50UmVmPEhUTUxFbGVtZW50Piwgb3BlbkRpYWxvZ3M6IFNkc0RpYWxvZ1JlZjxhbnk+W10pIHtcbiAgbGV0IHBhcmVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gZWxlbWVudC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cbiAgd2hpbGUgKHBhcmVudCAmJiAhcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnc2RzLWRpYWxvZ19fY29udGFpbmVyJykpIHtcbiAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiBwYXJlbnQgPyBvcGVuRGlhbG9ncy5maW5kKGRpYWxvZyA9PiBkaWFsb2cuaWQgPT09IHBhcmVudCEuaWQpIDogbnVsbDtcbn1cbiJdfQ==