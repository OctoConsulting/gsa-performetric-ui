/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { FocusMonitor } from "@angular/cdk/a11y";
import { ENTER, SPACE, hasModifierKey } from "@angular/cdk/keycodes";
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Host, ViewEncapsulation } from "@angular/core";
import { merge, Subscription } from "rxjs";
import { filter } from "rxjs/operators";
import { SdsAccordionItemComponent } from "./accordion-item.component";
var SdsAccordionItemHeaderComponent = /** @class */ (function () {
    function SdsAccordionItemHeaderComponent(accordionItem, _element, _focusMonitor, _changeDetectorRef) {
        var _this = this;
        this.accordionItem = accordionItem;
        this._element = _element;
        this._focusMonitor = _focusMonitor;
        this._changeDetectorRef = _changeDetectorRef;
        this._parentChangeSubscription = Subscription.EMPTY;
        // Since the toggle state depends on an @Input on the accordion item, we
        // need to subscribe and trigger change detection manually.
        this._parentChangeSubscription = merge(accordionItem.opened, accordionItem.closed, accordionItem._inputChanges.pipe(filter((/**
         * @param {?} changes
         * @return {?}
         */
        function (changes) { return !!(changes["disabled"]); })))).subscribe((/**
         * @return {?}
         */
        function () { return _this._changeDetectorRef.markForCheck(); }));
        _focusMonitor.monitor(_element).subscribe((/**
         * @param {?} origin
         * @return {?}
         */
        function (origin) {
            if (origin && accordionItem.accordion) {
                accordionItem.accordion._handleHeaderFocus(_this);
            }
        }));
    }
    Object.defineProperty(SdsAccordionItemHeaderComponent.prototype, "disabled", {
        /**
         * Whether the associated accordion item is disabled.
         * Implemented as a part of `FocusableOption`.
         */
        get: /**
         * Whether the associated accordion item is disabled.
         * Implemented as a part of `FocusableOption`.
         * @return {?}
         */
        function () {
            return this.accordionItem.disabled;
        },
        enumerable: true,
        configurable: true
    });
    /** Toggles the expanded state of the accordion item. */
    /**
     * Toggles the expanded state of the accordion item.
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype._toggle = /**
     * Toggles the expanded state of the accordion item.
     * @return {?}
     */
    function () {
        this.accordionItem.toggle();
    };
    /** Gets whether the accordion item is expanded. */
    /**
     * Gets whether the accordion item is expanded.
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype._isExpanded = /**
     * Gets whether the accordion item is expanded.
     * @return {?}
     */
    function () {
        return this.accordionItem.expanded;
    };
    /** Gets the accordion item id. */
    /**
     * Gets the accordion item id.
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype._getAccordionItemId = /**
     * Gets the accordion item id.
     * @return {?}
     */
    function () {
        return this.accordionItem.id;
    };
    /** Handle keydown event calling to toggle() if appropriate. */
    /**
     * Handle keydown event calling to toggle() if appropriate.
     * @param {?} event
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype._keydown = /**
     * Handle keydown event calling to toggle() if appropriate.
     * @param {?} event
     * @return {?}
     */
    function (event) {
        switch (event.keyCode) {
            // Toggle for space and enter keys.
            case SPACE:
            case ENTER:
                if (!hasModifierKey(event)) {
                    event.preventDefault();
                    this._toggle();
                }
                break;
            default:
                if (this.accordionItem.accordion) {
                    this.accordionItem.accordion._handleHeaderKeydown(event);
                }
                return;
        }
    };
    /**
     * Focuses the item header. Implemented as a part of `FocusableOption`.
     * @param origin Origin of the action that triggered the focus.
     * @docs-private
     */
    /**
     * Focuses the item header. Implemented as a part of `FocusableOption`.
     * \@docs-private
     * @param {?=} origin Origin of the action that triggered the focus.
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype.focus = /**
     * Focuses the item header. Implemented as a part of `FocusableOption`.
     * \@docs-private
     * @param {?=} origin Origin of the action that triggered the focus.
     * @return {?}
     */
    function (origin) {
        if (origin === void 0) { origin = "program"; }
        this._focusMonitor.focusVia(this._element, origin);
    };
    /**
     * @return {?}
     */
    SdsAccordionItemHeaderComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._parentChangeSubscription.unsubscribe();
        this._focusMonitor.stopMonitoring(this._element);
    };
    SdsAccordionItemHeaderComponent.decorators = [
        { type: Component, args: [{
                    selector: "sds-accordion-item-header",
                    template: "<span class=\"sds-accordion__title\" role=\"heading\">\n  <span class=\"sds-accordion__title-text\">\n    <ng-content></ng-content>\n  </span>\n  <span class=\"sds-accordion__icon\"></span>\n</span>\n",
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    host: {
                        class: "sds-accordion__trigger",
                        role: "button",
                        "[attr.id]": "accordionItem._headerId",
                        "[attr.tabindex]": "disabled ? -1 : 0",
                        "[attr.aria-controls]": "_getAccordionItemId()",
                        "[attr.aria-expanded]": "_isExpanded()",
                        "[attr.aria-disabled]": "accordionItem.disabled",
                        "(click)": "_toggle()",
                        "(keydown)": "_keydown($event)"
                    },
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    SdsAccordionItemHeaderComponent.ctorParameters = function () { return [
        { type: SdsAccordionItemComponent, decorators: [{ type: Host }] },
        { type: ElementRef },
        { type: FocusMonitor },
        { type: ChangeDetectorRef }
    ]; };
    return SdsAccordionItemHeaderComponent;
}());
export { SdsAccordionItemHeaderComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    SdsAccordionItemHeaderComponent.prototype._parentChangeSubscription;
    /** @type {?} */
    SdsAccordionItemHeaderComponent.prototype.accordionItem;
    /**
     * @type {?}
     * @private
     */
    SdsAccordionItemHeaderComponent.prototype._element;
    /**
     * @type {?}
     * @private
     */
    SdsAccordionItemHeaderComponent.prototype._focusMonitor;
    /**
     * @type {?}
     * @private
     */
    SdsAccordionItemHeaderComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3JkaW9uLWl0ZW0taGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc2Etc2FtL2NvbXBvbmVudHMvIiwic291cmNlcyI6WyJsaWIvYWNjb3JkaW9uL2FjY29yZGlvbi1pdGVtLWhlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQWdDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0UsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckUsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFDVixJQUFJLEVBRUosaUJBQWlCLEVBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUV2RTtJQW9CRSx5Q0FDaUIsYUFBd0MsRUFDL0MsUUFBb0IsRUFDcEIsYUFBMkIsRUFDM0Isa0JBQXFDO1FBSi9DLGlCQXVCQztRQXRCZ0Isa0JBQWEsR0FBYixhQUFhLENBQTJCO1FBQy9DLGFBQVEsR0FBUixRQUFRLENBQVk7UUFDcEIsa0JBQWEsR0FBYixhQUFhLENBQWM7UUFDM0IsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUx2Qyw4QkFBeUIsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO1FBUXJELHdFQUF3RTtRQUN4RSwyREFBMkQ7UUFDM0QsSUFBSSxDQUFDLHlCQUF5QixHQUFHLEtBQUssQ0FDcEMsYUFBYSxDQUFDLE1BQU0sRUFDcEIsYUFBYSxDQUFDLE1BQU0sRUFDcEIsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQzlCLE1B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USx5QkFBeUIsdUJBdUI3QixJQUFJO2dCQTlCUCxVQUFVO2dCQU5ILFlBQVk7Z0JBSW5CLGlCQUFpQjs7SUFpSG5CLHNDQUFDO0NBQUEsQUF0R0QsSUFzR0M7U0FwRlksK0JBQStCOzs7Ozs7SUFDMUMsb0VBQXVEOztJQUVyRCx3REFBdUQ7Ozs7O0lBQ3ZELG1EQUE0Qjs7Ozs7SUFDNUIsd0RBQW1DOzs7OztJQUNuQyw2REFBNkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGb2N1c01vbml0b3IsIEZvY3VzYWJsZU9wdGlvbiwgRm9jdXNPcmlnaW4gfSBmcm9tIFwiQGFuZ3VsYXIvY2RrL2ExMXlcIjtcbmltcG9ydCB7IEVOVEVSLCBTUEFDRSwgaGFzTW9kaWZpZXJLZXkgfSBmcm9tIFwiQGFuZ3VsYXIvY2RrL2tleWNvZGVzXCI7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSG9zdCxcbiAgT25EZXN0cm95LFxuICBWaWV3RW5jYXBzdWxhdGlvblxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgbWVyZ2UsIFN1YnNjcmlwdGlvbiB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7IFNkc0FjY29yZGlvbkl0ZW1Db21wb25lbnQgfSBmcm9tIFwiLi9hY2NvcmRpb24taXRlbS5jb21wb25lbnRcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcInNkcy1hY2NvcmRpb24taXRlbS1oZWFkZXJcIixcbiAgdGVtcGxhdGVVcmw6IFwiLi9hY2NvcmRpb24taXRlbS1oZWFkZXIuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOlsnLi9hY2NvcmRpb24taXRlbS1oZWFkZXIuY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGhvc3Q6IHtcbiAgICBjbGFzczogXCJzZHMtYWNjb3JkaW9uX190cmlnZ2VyXCIsXG4gICAgcm9sZTogXCJidXR0b25cIixcbiAgICBcIlthdHRyLmlkXVwiOiBcImFjY29yZGlvbkl0ZW0uX2hlYWRlcklkXCIsXG4gICAgXCJbYXR0ci50YWJpbmRleF1cIjogXCJkaXNhYmxlZCA/IC0xIDogMFwiLFxuICAgIFwiW2F0dHIuYXJpYS1jb250cm9sc11cIjogXCJfZ2V0QWNjb3JkaW9uSXRlbUlkKClcIixcbiAgICBcIlthdHRyLmFyaWEtZXhwYW5kZWRdXCI6IFwiX2lzRXhwYW5kZWQoKVwiLFxuICAgIFwiW2F0dHIuYXJpYS1kaXNhYmxlZF1cIjogXCJhY2NvcmRpb25JdGVtLmRpc2FibGVkXCIsXG4gICAgXCIoY2xpY2spXCI6IFwiX3RvZ2dsZSgpXCIsXG4gICAgXCIoa2V5ZG93bilcIjogXCJfa2V5ZG93bigkZXZlbnQpXCJcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBTZHNBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95LCBGb2N1c2FibGVPcHRpb24ge1xuICBwcml2YXRlIF9wYXJlbnRDaGFuZ2VTdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uRU1QVFk7XG4gIGNvbnN0cnVjdG9yKFxuICAgIEBIb3N0KCkgcHVibGljIGFjY29yZGlvbkl0ZW06IFNkc0FjY29yZGlvbkl0ZW1Db21wb25lbnQsXG4gICAgcHJpdmF0ZSBfZWxlbWVudDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIF9mb2N1c01vbml0b3I6IEZvY3VzTW9uaXRvcixcbiAgICBwcml2YXRlIF9jaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7XG5cbiAgICAvLyBTaW5jZSB0aGUgdG9nZ2xlIHN0YXRlIGRlcGVuZHMgb24gYW4gQElucHV0IG9uIHRoZSBhY2NvcmRpb24gaXRlbSwgd2VcbiAgICAvLyBuZWVkIHRvIHN1YnNjcmliZSBhbmQgdHJpZ2dlciBjaGFuZ2UgZGV0ZWN0aW9uIG1hbnVhbGx5LlxuICAgIHRoaXMuX3BhcmVudENoYW5nZVN1YnNjcmlwdGlvbiA9IG1lcmdlKFxuICAgICAgYWNjb3JkaW9uSXRlbS5vcGVuZWQsXG4gICAgICBhY2NvcmRpb25JdGVtLmNsb3NlZCxcbiAgICAgIGFjY29yZGlvbkl0ZW0uX2lucHV0Q2hhbmdlcy5waXBlKFxuICAgICAgICBmaWx0ZXIoY2hhbmdlcyA9PiAhIShjaGFuZ2VzW1wiZGlzYWJsZWRcIl0pKVxuICAgICAgKVxuICAgICkuc3Vic2NyaWJlKCgpID0+IHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpKTtcblxuICAgIF9mb2N1c01vbml0b3IubW9uaXRvcihfZWxlbWVudCkuc3Vic2NyaWJlKG9yaWdpbiA9PiB7XG4gICAgICBpZiAob3JpZ2luICYmIGFjY29yZGlvbkl0ZW0uYWNjb3JkaW9uKSB7XG4gICAgICAgIGFjY29yZGlvbkl0ZW0uYWNjb3JkaW9uLl9oYW5kbGVIZWFkZXJGb2N1cyh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGFzc29jaWF0ZWQgYWNjb3JkaW9uIGl0ZW0gaXMgZGlzYWJsZWQuIFxuICAgKiBJbXBsZW1lbnRlZCBhcyBhIHBhcnQgb2YgYEZvY3VzYWJsZU9wdGlvbmAuXG4gICAqL1xuICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbS5kaXNhYmxlZDtcbiAgfVxuXG4gIC8qKiBUb2dnbGVzIHRoZSBleHBhbmRlZCBzdGF0ZSBvZiB0aGUgYWNjb3JkaW9uIGl0ZW0uICovXG4gIF90b2dnbGUoKTogdm9pZCB7XG4gICAgdGhpcy5hY2NvcmRpb25JdGVtLnRvZ2dsZSgpO1xuICB9XG5cbiAgLyoqIEdldHMgd2hldGhlciB0aGUgYWNjb3JkaW9uIGl0ZW0gaXMgZXhwYW5kZWQuICovXG4gIF9pc0V4cGFuZGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmFjY29yZGlvbkl0ZW0uZXhwYW5kZWQ7XG4gIH1cblxuICAvKiogR2V0cyB0aGUgYWNjb3JkaW9uIGl0ZW0gaWQuICovXG4gIF9nZXRBY2NvcmRpb25JdGVtSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvcmRpb25JdGVtLmlkO1xuICB9XG5cbiAgLyoqIEhhbmRsZSBrZXlkb3duIGV2ZW50IGNhbGxpbmcgdG8gdG9nZ2xlKCkgaWYgYXBwcm9wcmlhdGUuICovXG4gIF9rZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAvLyBUb2dnbGUgZm9yIHNwYWNlIGFuZCBlbnRlciBrZXlzLlxuICAgICAgY2FzZSBTUEFDRTpcbiAgICAgIGNhc2UgRU5URVI6XG4gICAgICAgIGlmICghaGFzTW9kaWZpZXJLZXkoZXZlbnQpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLl90b2dnbGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHRoaXMuYWNjb3JkaW9uSXRlbS5hY2NvcmRpb24pIHtcbiAgICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW0uYWNjb3JkaW9uLl9oYW5kbGVIZWFkZXJLZXlkb3duKGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9jdXNlcyB0aGUgaXRlbSBoZWFkZXIuIEltcGxlbWVudGVkIGFzIGEgcGFydCBvZiBgRm9jdXNhYmxlT3B0aW9uYC5cbiAgICogQHBhcmFtIG9yaWdpbiBPcmlnaW4gb2YgdGhlIGFjdGlvbiB0aGF0IHRyaWdnZXJlZCB0aGUgZm9jdXMuXG4gICAqIEBkb2NzLXByaXZhdGVcbiAgICovXG4gIGZvY3VzKG9yaWdpbjogRm9jdXNPcmlnaW4gPSBcInByb2dyYW1cIikge1xuICAgIHRoaXMuX2ZvY3VzTW9uaXRvci5mb2N1c1ZpYSh0aGlzLl9lbGVtZW50LCBvcmlnaW4pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcGFyZW50Q2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5fZm9jdXNNb25pdG9yLnN0b3BNb25pdG9yaW5nKHRoaXMuX2VsZW1lbnQpO1xuICB9XG59XG4iXX0=